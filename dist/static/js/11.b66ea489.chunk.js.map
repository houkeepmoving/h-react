{"version":3,"sources":["pages/reservation-detail/reservation-detail.scss","pages/reservation-detail/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","tool/common.js","tool/getUserId.js","components/business/calendar/index.js","components/business/calendar/calendar.scss"],"names":["module","exports","ReservationDetail","inject","observer","props","getRepairDetail","param","dealerId","Tool","specId","Api","getRepairOrPackageDetail","then","res","returncode","Promise","reject","setState","reservationInfo","result","reservationPhone","mobile","catch","err","ComNoContent","$comConntent","message","getMaintainDetail","itemIds","handleReservation","handleTrackCustomEvent","parseInt","state","selectTimeBucket","reservationName","test","itemList","list","length","map","item","itemId","id","itemName","name","itemPrice","price","console","log","plateNumber","decodeURIComponent","String","appointTime","appointTypes","type","buyCarTime","comboId","contactInfo","expectServiceItemList","maintainDate","selectDate","maintainMode","maintainTimeSlotEnd","endTime","replace","maintainTimeSlotStart","startTime","orderFrom","playerName","seriesId","travelDistance","pvAreaId","addOrder","Common","orderId","Toast","$toast","handleOpenMap","latitude","longitude","address","handleShowCalendar","isShowCalendar","handleHideCalendar","handleConfirmDate","date","handleNameChange","event","value","target","canSubmit","formDataCheck","handlePhoneChange","handleTimeBucket","bucket","userId","getUserIdInfo","this","Header","$setTitle","e","ios","scrollHeight","document","body","documentElement","setTimeout","window","scrollTo","action","objectId","trackCustomEvent","className","classNames","styles","reservation_detail_container","card_wrapper","cell","hd","service_name_title","key","cell_service","service_name","dealer_name","bd","dealer_address","onClick","icon_address","ft","time_bucket_box","timeList","time","index","time_bucket_item","active","bind","maxLength","placeholder","onChange","onBlur","blurHandel","blank","reservation_btn_box","reservation_btn","can_submit","show","hideCalendar","confirmDate","React","Component","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","isWz","checkViolatApp","dprnVersion","isAutoApp","checkMainApp","pageJumpHandel","path","queryParams","browser","currentHost","location","protocol","host","pathname","query","keys","forEach","linkUrl","includes","OPEN_LINK_URL","encodeURIComponent","checkCarcommentApp","href","trackCustomPageInit","cate","customVars","pvTrack","site","site_id","category","category_id","subcategory","sub_category_id","pageVars","_yc_ahas","push","pageId","refpage","channel","cityId","handleLogin","params","backUrl","successCb","failCb","appCallBack","appParams","code","require","jsBridge","openLogin","success","toString","JSON","stringify","fail","showVideoPlayer","bodyCls","scrollTop","that","jsBridgeV2","openNativePageAsyncResult","url","videos","videoId","requestCode","requestcode","paramStr","showGallery","originImages","autoAppOriginImages","i","len","tmpObj","bigimg","openMap","dealerParams","refpageName","lgData","mapUrl","parse","issupportmap","RN_MAP_VIEW_URL","destLng","destLat","destAddres","choseCar","selectAutoHomeCar","json","extras","addCar","checkAutoHomeApp","data","getRemarkHostUrl","slice","getUserId","Calendar","initCalendarRange","calendarSource","parseDate","startDate","endDate","generateKeys","daycount","getDayCount","getFullYear","getMonth","firstWeekDay","getDay","crItem","calendarRangeItem","j","item1","calendarItem","items","z","itemDay","Date","disabled","dateStr","formateDate","item2","getDateStr","AddDayCount","dd","setDate","getDate","year","month","timeArray","split","startMonthDate","endMonthDate","setMonth","y","m","d","handleHide","choseDateStr","disable","formateKey","formateday","weekdays","calendar","transparent_mask","calendar_main","header","contents","picker_inner","months","days","dateIndex","unable","confirmate_btn_box","confirmate_btn"],"mappings":"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","file":"static/js/11.b66ea489.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"reservation_detail_container\":\"reservation_detail_container__b5c48348\",\"blank\":\"blank__cd46a32d\",\"card_wrapper\":\"card_wrapper__b4cd89c8\",\"car_null_card\":\"car_null_card__fcb4e2b1\",\"btn_add_car\":\"btn_add_car__d979aa9d\",\"icon_plus\":\"icon_plus__b2a13081\",\"tip\":\"tip__8a88d1e7\",\"cell\":\"cell__83429e93\",\"hd\":\"hd__ae92372f\",\"service_name_title\":\"service_name_title__7e960cc1\",\"service_name\":\"service_name__441b8ace\",\"bd\":\"bd__43f75b41\",\"service_price\":\"service_price__fd09eac4\",\"ft\":\"ft__e8390b42\",\"dealer_name\":\"dealer_name__dda9b440\",\"dealer_address\":\"dealer_address__339c422f\",\"icon_address\":\"icon_address__c0e0c86f\",\"cell_service\":\"cell_service__6e718c0e\",\"time_bucket_box\":\"time_bucket_box__46a4d5c1\",\"time_bucket_item\":\"time_bucket_item__065157b4\",\"active\":\"active__dc8ed856\",\"reservation_btn_box\":\"reservation_btn_box__c9bf1fd7\",\"reservation_btn\":\"reservation_btn__a4499d44\",\"can_submit\":\"can_submit__2805b7be\"};","import React from 'react';\n\nimport Api from 'api';\nimport classNames from 'classnames';\nimport styles from \"./reservation-detail.scss\";\nimport * as Tool from 'tool';\nimport * as getUserIdInfo from 'tool/getUserId';\nimport * as Common from '../../tool/common';\nimport { inject, observer } from 'mobx-react';\n\nimport Calendar from 'components/business/calendar';\n\n@inject('Toast', 'ComNoContent', 'Header')\n@observer\nexport default class ReservationDetail extends React.Component {\n  constructor (props){\n    super(props);\n    this.state = {\n      // 是否显示日历组件\n      isShowCalendar: false,\n      // 选择的预约日期\n      selectDate: '',\n      // 选择的时间段\n      selectTimeBucket: null,\n      // 联系人\n      reservationName: '',\n      // 联系电话\n      reservationPhone: '',\n      // 预约详情信息\n      reservationInfo: null,\n      // 类型： 0保养 1维修 默认维修\n      type: 1,\n      canSubmit: false // 是否可以提交\n    };\n  }\n\n  componentDidMount() {\n    let { userId } = getUserIdInfo.getUserId();\n    Common.trackCustomPageInit({\n      'pageId': 'tmfy_book_detail_pv',\n      'site_id': 1211120,\n      'category_id': 1595,\n      'sub_category_id': 18467\n    }, {\n      'userId': userId,\n      'type': parseInt(Tool.getUrlParam('type'))\n    });\n    this.props.Header.$setTitle('预约详情');\n    Tool.setTitle('预约详情');\n    // 校验必填项--按钮状态\n    this.setState({\n      canSubmit: this.formDataCheck()\n    });\n    this.setState({\n      type: parseInt(Tool.getUrlParam('type')) === 0 ? 1 : 2\n    });\n    if (Tool.getUrlParam('selectDate') && Tool.getUrlParam('selectDate') !== '' && Tool.getUrlParam('selectDate') !== 'undefined') { // 参数传递取参数值\n      this.setState({\n        selectDate: Tool.getUrlParam('selectDate')\n      });\n    } else { // 未传递默认明天\n      /*let now = new Date();\n      let nextDay = new Date(now.setDate(now.getDate() + 1));\n      let y = nextDay.getFullYear();\n      let m = (nextDay.getMonth() + 1) < 10 ? '0' + (nextDay.getMonth() + 1) : (nextDay.getMonth() + 1);\n      let d = nextDay.getDate() < 10 ? '0' + nextDay.getDate() : nextDay.getDate();\n      this.setState({\n        selectDate: `${y}-${m}-${d}`\n      });*/\n    }\n\n    if (parseInt(Tool.getUrlParam('type')) === 1) { // 维修\n      // 获取维修预约详情\n      this.getRepairDetail();\n    } else { // 保养\n      // 获取保养预约详情\n      this.getMaintainDetail();\n    }\n  }\n\n  // 获取维修预约详情信息\n  getRepairDetail = () => {\n    let param = {\n      dealerId: Tool.getUrlParam('dealerId') || '',\n      specId:  Tool.getUrlParam('specId') || ''\n    };\n    Api.getRepairOrPackageDetail(param).then((res) => {\n      if (res.returncode === 0) {\n        this.setState({\n          reservationInfo: res.result,\n          reservationPhone: res.result.mobile\n        });\n      } else {\n        return Promise.reject(res);\n      }\n    }).catch((err) => {\n      this.props.ComNoContent.$comConntent(err.message || '页面溜走了，请稍候重试');\n    });\n  }\n\n  getMaintainDetail = () => {\n    let param = {\n      dealerId: Tool.getUrlParam('dealerId'),\n      itemIds: Tool.getUrlParam('itemIds')\n    };\n\n    Api.getMaintainDetail(param).then((res) => {\n      if (res.returncode === 0) {\n        this.setState({\n          reservationInfo: res.result,\n          reservationPhone: res.result.mobile\n        });\n      } else {\n        return Promise.reject(res);\n      }\n    }).catch((err) => {\n      this.props.ComNoContent.$comConntent(err.message || '页面溜走了，请稍候重试');\n    });\n  }\n\n  // 必填项校验\n  formDataCheck() {\n    let itemIds = Tool.getUrlParam('itemIds');\n    if (parseInt(Tool.getUrlParam('type')) === 0 && !itemIds) {\n      return false;\n    } else if (!this.state.selectTimeBucket) {\n      return false;\n    } else if (!this.state.reservationName) {\n      return false;\n    } else if (!this.state.reservationPhone) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  // 立即免费预约\n  handleReservation = () => {\n    // 埋点\n    this.handleTrackCustomEvent('tmfy_book_detail_book_click', Tool.getUrlParam('dealerId') || '');\n\n    // 非空校验提示\n    let itemIds = Tool.getUrlParam('itemIds');\n    if (parseInt(Tool.getUrlParam('type')) === 0 && !itemIds) {\n      this.props.Toast.$toast('请先选择保养项目');\n      return;\n    } else if (!this.state.selectTimeBucket) {\n      this.props.Toast.$toast('请选择服务时间段');\n      return;\n    } else if (!this.state.reservationName) {\n      this.props.Toast.$toast('请填写联系人');\n      return;\n    } else if (!this.state.reservationPhone) {\n      this.props.Toast.$toast('请填写手机号码');\n      return;\n    } else if (!(/^1[3456789]\\d{9}$/.test(this.state.reservationPhone))) {\n      this.props.Toast.$toast('请填写正确的手机号码');\n      return;\n    }\n\n    // 格式化保养项目\n      let itemList = [];\n      if (this.state.reservationInfo.list && this.state.reservationInfo.list.length > 0 ) {\n          itemList = this.state.reservationInfo.list.map((item) => {\n              return {\n                  itemId: item.id,\n                  itemName: item.name,\n                  itemPrice: item.price || ''\n              };\n          });\n      }\n      console.log(Tool.getUrlParamQuery().plateNumber);\n    let plateNumber = decodeURIComponent(decodeURIComponent(Tool.getUrlParamQuery().plateNumber));\n    plateNumber = plateNumber && String(plateNumber) !== 'null' && String(plateNumber) !== 'undefined' && plateNumber.length <= 10 ? plateNumber : '';\n    console.log(plateNumber);\n    let param = {\n      appointTime: '',\n      appointTypes: [this.state.type], // 订单类型：1保养 2维修\n      buyCarTime: '',\n      comboId: 0, // 套餐id 不能为空 没有传0\n      contactInfo: this.state.reservationPhone,\n      dealerId: Tool.getUrlParam('oldDealerId'), // 经销商id\n      expectServiceItemList: itemList || [], // 保养项目\n      maintainDate: this.state.selectDate,\n      maintainMode: 1, // 保养模式：1到店保养 2上门取送\n      maintainTimeSlotEnd: parseInt(this.state.selectTimeBucket.endTime.replace(/:/, '')),\n      maintainTimeSlotStart: parseInt(this.state.selectTimeBucket.startTime.replace(/:/, '')),\n      orderFrom: 2, // 下单平台类型,0(未知),1(m站),2(app端),3(小程序端),4(pc),5(百度小程序)\n      plateNumber: plateNumber || '', // 车牌号\n      playerName: this.state.reservationName,\n      seriesId: parseInt(Tool.getUrlParam('seriesId')),\n      specId: parseInt(Tool.getUrlParam('specId')),\n      travelDistance: parseInt(Tool.getUrlParam('travelDistance')) || 0, // 如果没有里程值就传空\n      pvAreaId: Tool.getCookie('transparent_pvareaid') !== 'undefined' ? Tool.getCookie('transparent_pvareaid') : ''\n    };\n    Api.addOrder(param).then((res) => {\n      if (res.returncode === 0) {\n        Common.pageJumpHandel('reservationSuccess', { type: this.state.type, orderId: res.result.orderId });\n      } else {\n        return Promise.reject(res);\n      }\n    }).catch((err) => {\n      this.props.Toast.$toast(err.message || '页面溜走了，请稍候重试');\n    });\n  }\n  // 打开地图\n  handleOpenMap = () => {\n    Common.openMap({\n      latitude: this.state.reservationInfo.latitude,\n      longitude: this.state.reservationInfo.longitude,\n      address: this.state.reservationInfo.address,\n      name: this.state.reservationInfo.name\n    });\n  }\n\n  // 显示日历\n  handleShowCalendar = () => {\n    this.setState({\n      isShowCalendar: true\n    });\n  }\n\n  // 隐藏日历\n  handleHideCalendar = () => {\n    this.setState({\n      isShowCalendar: false\n    });\n  }\n\n  // 日历组件确认日期\n  handleConfirmDate = (date) => {\n    // 埋点\n    this.handleTrackCustomEvent('tmfy_book_detail_choose_date_click', date);\n\n    this.setState({\n      selectDate: date,\n      isShowCalendar: false\n    });\n  }\n\n  // 修改联系人名称\n  handleNameChange = (event) => {\n    // eslint-disable-next-line\n    let regStr = /[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF][\\u200D|\\uFE0F]|[\\uD83C|\\uD83D|\\uD83E][\\uDC00-\\uDFFF]|[0-9|*|#]\\uFE0F\\u20E3|[0-9|#]\\u20E3|[\\u203C-\\u3299]\\uFE0F\\u200D|[\\u203C-\\u3299]\\uFE0F|[\\u2122-\\u2B55]|\\u303D|[\\A9|\\AE]\\u3030|\\uA9|\\uAE|\\u3030/ig;\n    let value = event.target.value.replace(regStr, '').replace(/(^\\s*)|(\\s*$)/g, '');\n    this.setState({\n      reservationName: value\n    }, () => {\n      this.setState({\n        canSubmit: this.formDataCheck()\n      });\n    });\n  }\n\n  // 修改联系电话\n  handlePhoneChange = (event) => {\n    let value = event.target.value;\n    this.setState({\n      reservationPhone: value.replace(/[^0-9]/ig, '')\n    }, () => {\n      this.setState({\n        canSubmit: this.formDataCheck()\n      });\n    });\n  }\n\n  // 时间段切换处理\n  handleTimeBucket = (bucket) => {\n    // 埋点\n    this.handleTrackCustomEvent('tmfy_book_detail_choose_time_click', bucket);\n\n    this.setState({\n      selectTimeBucket: bucket\n    }, () => {\n      if (this.formDataCheck()) {\n        this.setState({\n          canSubmit: true\n        });\n      }\n    });\n  }\n\n  // input失去焦点handel\n  blurHandel(e) {\n    if (Tool.checkMobileVersions().ios) {\n      let scrollHeight = document.body.scrollHeight || document.documentElement.scrollHeight;\n      setTimeout(() => {\n        window.scrollTo(0, scrollHeight - 1);\n      }, 100);\n    }\n  }\n\n  // 埋点事件\n  handleTrackCustomEvent(action, objectId = '') {\n    let { userId } = getUserIdInfo.getUserId();\n    // eslint-disable-next-line\n    trackCustomEvent('yc_page_common_click', {\n      'bus': '1',\n      'refpage': Tool.getCookie('refpage'),\n      'channel': Tool.getCookie('channel'),\n      'city': Tool.getCookie('cityId') || 110100,\n      'action': action\n    }, {\n      'userId': userId,\n      'objectId': objectId,\n      'type': parseInt(Tool.getUrlParam('type'))\n    });\n  }\n\n  render() {\n    const { isShowCalendar, selectDate, selectTimeBucket, reservationName, reservationPhone, reservationInfo, canSubmit } = this.state;\n    return (\n      reservationInfo && <div className={classNames('reservation_detail_container', styles.reservation_detail_container)}>\n        {/*预约项目：只有服务才有*/}\n        {\n          reservationInfo.list && reservationInfo.list.length > 0 && <div className={ styles.card_wrapper }>\n            <div className={ styles.cell }>\n              <div className={ classNames(styles.hd, styles.service_name_title) }>预约项目</div>\n            </div>\n            {\n              reservationInfo.list.map((item) => {\n                return (\n                  <div key={ item.id } className={ classNames(styles.cell, styles.cell_service) }>\n                    <div className={ classNames(styles.hd, styles.service_name) }>{ item.name }</div>\n                    {/*{\n                      item.price && <div className={ classNames(styles.bd, styles.service_price) }><span>￥{ item.price }</span> 起</div>\n                    }*/}\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {/*服务门店*/}\n        <div className={ styles.card_wrapper }>\n          <div className={ classNames(styles.cell, styles.dealer_name) }>\n            <div className={ styles.hd }>服务门店</div>\n            <div className={ styles.bd }>{ reservationInfo.name }</div>\n          </div>\n          {\n            reservationInfo.address && <div className={ classNames(styles.cell, styles.dealer_address) }>\n              <div className={ styles.hd }>详细位置</div>\n              <div className={ styles.bd } onClick={ this.handleOpenMap }><i className={ styles.icon_address }></i>{ reservationInfo.address }</div>\n            </div>\n          }\n\n        </div>\n        {/*服务日期*/}\n        <div className={ styles.card_wrapper }>\n          <div className={ styles.cell }>\n            <div className={ styles.hd }>服务日期</div>\n            <div className={ styles.bd } onClick={ this.handleShowCalendar }>{ selectDate || '请选择到店时间' }</div>\n            <div className={ styles.ft }></div>\n          </div>\n          <div className={ styles.cell }>\n            <div className={ styles.hd }>服务时间段</div>\n          </div>\n          <div className={ styles.time_bucket_box }>\n            {\n              reservationInfo.timeList && reservationInfo.timeList.length > 0 && reservationInfo.timeList.map((time, index) => {\n                return (<div key={ index } className={ classNames(styles.time_bucket_item, selectTimeBucket === time ? styles.active : '') } onClick={ this.handleTimeBucket.bind(this, time) }>{ time.startTime + '-' + time.endTime}</div>);\n              })\n            }\n          </div>\n        </div>\n        {/*联系人详情*/}\n        <div className={ styles.card_wrapper }>\n          <div className={ styles.cell }>\n            <div className={ styles.hd }>联系人详情</div>\n          </div>\n          <div className={ styles.cell }>\n            <div className={ styles.hd }>联系人</div>\n            <div className={ styles.bd }>\n              <input\n                type=\"text\"\n                maxLength=\"30\"\n                value={ reservationName }\n                placeholder=\"请填写\"\n                onChange={ this.handleNameChange }\n                onBlur={ (e) => this.blurHandel(e) }\n              />\n            </div>\n          </div>\n          <div className={ styles.cell }>\n            <div className={ styles.hd }>手机号码</div>\n            <div className={ styles.bd }>\n              <input\n                type=\"tel\"\n                maxLength=\"11\"\n                value={ reservationPhone }\n                placeholder=\"请填写\"\n                onChange={ this.handlePhoneChange }\n                onBlur={ (e) => this.blurHandel(e) }\n              />\n            </div>\n          </div>\n        </div>\n        <div className={ styles.blank }></div>\n        {/*立即免费预约*/}\n        <div className={ styles.reservation_btn_box }>\n          <div className={ classNames(styles.reservation_btn, {[styles.can_submit]: canSubmit}) } onClick={ this.handleReservation }>立即免费预约</div>\n        </div>\n\n        <Calendar show={ isShowCalendar } hideCalendar={ this.handleHideCalendar } confirmDate={ this.handleConfirmDate }/>\n      </div>\n    );\n  }\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import * as Tool from 'tool';\n\nlet isWz = Tool.webApp.checkViolatApp() || Tool.getCookie('iswz');\nlet dprnVersion = (Tool.getCookie('dprnversion') || '').replace(/\\./g, '');\nlet isAutoApp = Tool.webApp.checkMainApp();\n\n// 页面跳转\nexport const pageJumpHandel = (path = '', queryParams = {}, browser = 'wk') => { // path:页面路由地址 queryParams：跳转传递query参数\n  let currentHost = `${window.location.protocol}//${window.location.host}${window.location.pathname}#/`; // 当前域名\n  let query = '';\n  Object.keys(queryParams).forEach((key, index) => {\n    query += `${index ? '&' : ''}${key}=${queryParams[key]}`;\n  });\n  let linkUrl = path.includes('http') ? path : `${currentHost}${path}?${query}`;\n  let OPEN_LINK_URL = encodeURIComponent(linkUrl);\n  if (Tool.webApp.checkMainApp()) { // 端内\n    if (Tool.webApp.checkCarcommentApp()) { // 汽车点评\n      Tool.openNativePage(`autohome://insidebrowser${browser}?url=${OPEN_LINK_URL}`);\n    } else { // 主软环境\n      window.location.href = `autohome://insidebrowser${browser}?url=${OPEN_LINK_URL}`;\n    }\n  } else if (isWz) { // 违章app\n    setTimeout(() => {\n      window.location.href = `wzsdk://wzarticle?url=${OPEN_LINK_URL}`;\n    }, 30);\n  } else { // M\n    window.location.href = linkUrl;\n  }\n  // window.location.href = linkUrl;\n\n};\n\n// pv show 统计\nexport const trackCustomPageInit = (cate = {}, customVars = {}) => {\n  // eslint-disable-next-line\n  pvTrack.site = cate.site_id;\n  // eslint-disable-next-line\n  pvTrack.category = cate.category_id;\n  // eslint-disable-next-line\n  pvTrack.subcategory = cate.sub_category_id;\n  // eslint-disable-next-line\n  pvTrack.pageVars = customVars;\n  // eslint-disable-next-line\n  window._yc_ahas.push(['_trackPageInit']);\n  // eslint-disable-next-line\n  trackCustomEvent('yc_dynamic_page_show', {\n    'bus': '1',\n    'page': cate.pageId ? cate.pageId : cate.site_id + '-' + cate.category_id + '-' + cate.sub_category_id,\n    'refpage': cate.refpage || '',\n    'channel': cate.channel || '0',\n    'city': cate.cityId || 110100\n  }, customVars);\n};\n\n// 操作登录信息\nexport const handleLogin = (params = {}) => {\n  console.log(window.location.href, '登录当前url');\n  let { backUrl, successCb = '', failCb = '' } = params;\n  if (Tool.webApp.checkViolatApp() || Tool.getCookie('iswz')) { // 违章\n    window.location.href = 'wzsdk://login';\n    window.appCallBack = (appParams) => {\n      if (appParams.code === 0) {\n        successCb && successCb(appParams);\n      }\n    };\n  } else if (Tool.webApp.checkMainApp()) { // 点评和主软\n    require('jsBridge');  // eslint-disable-next-line\n    window.jsBridge.openLogin({\n      success: (result) => {\n        if (result.returncode.toString() === '0') {\n          successCb && successCb(result);\n        }\n        console.log(JSON.stringify(result)); // eslint-disable-line\n      },\n      fail: (result) => {\n        failCb && failCb(result);\n        console.log(JSON.stringify(result)); // eslint-disable-line\n      }\n    });\n  } else { // M站\n    window.location.href = `http://account.m.autohome.com.cn/?backurl=${backUrl}`;\n  }\n};\n\nexport const wxProgramLogin = () => {\n   // 获取当前url\n  let locationUrl = encodeURIComponent(window.location.href);\n   // 小程序登录\n   wx.miniProgram.redirectTo({ url: `/pages/login/login?url=${locationUrl}` }); // eslint-disable-line\n};\n\n// 弹窗时候锁定页面\nexport const ModalHelper = (function(bodyCls) {\n  let scrollTop;\n  return {\n    afterOpen: function() {\n      scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n      document.body.classList.add(bodyCls);\n      document.body.style.top = -scrollTop + 'px';\n      // 锁定\n      // document.documentElement.style.overflow = 'hidden';\n      // document.body.style.overflow = 'hidden';\n    },\n    beforeClose: function() {\n      document.body.classList.remove(bodyCls);\n      document.body.scrollTop = scrollTop;\n      document.documentElement.scrollTop = scrollTop;\n      document.documentElement.style.overflow = '';\n      document.body.style.overflow = '';\n    }\n  };\n})('modal-open');\n\n// 首页 list && 商家详情 跳转排行榜\nexport const linkToDealerRankList = (that, rankFlag) => {\n  // 判断code码是区域码还是城市码\n  let linkUrl = '';\n  let currentHost = `${window.location.protocol}//${window.location.host}`; // 当前域名\n  if (rankFlag.area % 100 === 0 && rankFlag.area % 1000 !== 0) { // cityCode后两位为0\n    linkUrl = `${currentHost}/remark/dealerranklist?brand=${rankFlag.brand}&areaId=&cityId=${rankFlag.area}&category=${rankFlag.category}&source=${rankFlag.source}`;\n  } else {\n    linkUrl = `${currentHost}/remark/dealerranklist?brand=${rankFlag.brand}&areaId=${rankFlag.area}&cityId=&category=${rankFlag.category}&source=${rankFlag.source}`;\n  }\n  if (that.isAutoApp) {\n    // 主软内\n    const OPEN_LINK_URL = encodeURIComponent(linkUrl);\n    setTimeout(() => {\n      Tool.openNativePage(`autohome://insidebrowser?url=${OPEN_LINK_URL}`);\n    }, 10);\n  } else if (that.isWz) {\n    // 违章内\n    const OPEN_LINK_URL = encodeURIComponent(linkUrl);\n    setTimeout(() => {\n      window.location.href = `wzsdk://wzarticle?url=${OPEN_LINK_URL}`;\n    }, 10);\n  } else {\n    // M站\n    if (rankFlag.area % 100 === 0 && rankFlag.area % 1000 !== 0) { // cityCode后两位为0 省份后三位为0\n      linkUrl = `/remark/dealerranklist?brand=${rankFlag.brand}&areaId=&cityId=${rankFlag.area}&category=${rankFlag.category}&source=${rankFlag.source}`;\n    } else {\n      linkUrl = `/remark/dealerranklist?brand=${rankFlag.brand}&areaId=${rankFlag.area}&cityId=&category=${rankFlag.category}&source=${rankFlag.source}`;\n    }\n    that.$router.push({ path: linkUrl });\n  }\n};\n\n// 视频播放\nexport const showVideoPlayer = (that, params) => {\n  if (Tool.webApp.checkMainApp()) { // 端内用app端的视频播放器\n    if (Tool.webApp.checkCarcommentApp()) { // 点评app\n      let dprnVersion = (Tool.getCookie('dprnversion') || '').replace(/\\./g, '');\n      if (dprnVersion >= 250) { // v2.5.0及以上版本支持播放器\n        require('jsBridge');\n        window.jsBridgeV2.openNativePageAsyncResult({\n          url: `dianpinginside://cfwsmallvideo?videoid=${params.videos[0].videoId}&activityid=&activitytype=&refpage=`,\n          requestCode: 1122,\n          success: (result) => {\n            console.log(JSON.stringify(result));\n            if (result.result.requestcode === 1122) {\n              // TODO\n            }\n          },\n          fail: (result) => {\n            console.log(JSON.stringify(result));\n          }\n        });\n      } else {\n        that.props.Toast.$toast('请升级最新客户端观看活动视频～');\n      }\n    } else { // 主软\n      const paramStr = `id=${params.videos[0].videoId}&topicid=&source=31&bsid=11&bsname=QiCheDianPing&loadmodel=4`;\n      require('jsBridge');\n      window.jsBridgeV2.openNativePageAsyncResult({\n        url: `autohome://article/shortvideolist?${paramStr}`,\n        requestCode: 1133,\n        success: (result) => {\n          console.log(JSON.stringify(result));\n          if (result.result.requestcode === 1133) {\n            // TODO\n          }\n        },\n        fail: (result) => {\n          console.log(JSON.stringify(result));\n        }\n      });\n    }\n  }\n};\n\nexport const videoBack = (that) => {\n  that.videoShow = false;\n  setTimeout(() => {\n    that.$refs.videoPlayComponent.pausedVideo();\n  }, 10);\n};\n\n// 查看大图\nexport const showGallery = (that, index, originImages) => {\n  if (Tool.webApp.checkMainApp()) {\n    let autoAppOriginImages = [];\n    for (let i = 0, len = originImages.length; i < len; i++) {\n      let tmpObj = {\n        'url': originImages[i],\n        'title': ''\n      };\n      autoAppOriginImages.push(tmpObj);\n    }\n    require('jsBridge');\n    window.jsBridgeV2.bigimg({\n      'currentindex': index + 1,\n      'image': autoAppOriginImages,\n      success(result) {\n        console.log(JSON.stringify(result));\n      },\n      fail(result) {\n        console.log(JSON.stringify(result));\n      }\n    });\n  }\n};\n// 商家详情 && 商品详情 跳转点评详情\nexport const handleCommentDetail = (that, data) => {\n  let query = that.$route.query;\n  let refpageName = query.refpageName;\n  let reviewId = data.id;\n  let queryParams = {\n    ...query,\n    refpageName: refpageName,\n    reviewId: reviewId\n  };\n\n  if (query.shareSource) {\n    queryParams.shareSource = query.shareSource;\n  }\n  if (query.typeSource) {\n    queryParams.typeSource = query.typeSource;\n  }\n  pageJumpHandel('/remark/commentdetail', queryParams);\n};\n\n// 商家跳转地图页\nexport const openMap = (dealerParams) => {\n  console.log('开始调用地图页');\n  let { latitude, longitude, address } = dealerParams;\n  let refpageName = Tool.getUrlParam('refpageName');\n\n  if (isWz) {\n    console.log('违章');\n    let lgData = Tool.getCookie('lg_data');\n    let mapUrl = `wzsdk://map?dlat=${latitude}&dlng=${longitude}&daddress=${address}&refpageName=${refpageName}`;\n    if (parseInt(Tool.getCookie('issupportmap')) === 1) {\n      // 违章app版本是否支持唤地图， 1 为支持， 非1为不支持\n      window.location.href = mapUrl;\n    }\n\n    if (lgData && parseInt(JSON.parse(lgData)).issupportmap === 1) {\n      // 临时解决 ios 5.0 版本\n      window.location.href = mapUrl;\n    }\n    // window.location.href = `wzsdk://map?dlat=${latitude}&dlng=${longitude}&daddress=${address}`;\n  } else if (isAutoApp) {\n    // 汽车点评RN环境\n    if (dprnVersion >= 200) {\n      console.log('点评');\n      // RN环境下支持地图导航\n      const RN_MAP_VIEW_URL = `rn://DianPing_Main/MapView?name=${encodeURIComponent(dealerParams.name)}&address=${encodeURIComponent(address)}&lat=${latitude}&lng=${longitude}`;\n\n      Tool.openNativePage(`autohome://rninsidebrowser?url=${encodeURIComponent(RN_MAP_VIEW_URL)}`);\n\n      return false;\n    }\n    console.log('主软');\n    // 主软原生环境\n    let linkUrl = `https://yczj.m.autohome.com.cn/topic/m/baidumap/index.html?destLng=${longitude}&destLat=${latitude}&refpageName=${refpageName}`;\n    let OPEN_LINK_URL = encodeURIComponent(linkUrl);\n    setTimeout(() => {\n      Tool.openNativePage(`autohome://insidebrowser?url=${OPEN_LINK_URL}`);\n    }, 10);\n  } else {\n    console.log('m端');\n    // M\n    Tool.checkIsHasApp({\n      destLng: longitude,\n      destLat: latitude,\n      destAddres: address,\n      refpageName: refpageName\n    });\n  }\n};\n// 将img转成base64\nexport const img2base64 = (params = {}) => {\n  let { imgUrlArr = [], cut = true, canvasWith = 103, canvasHeight = 103, cb = '', failCb = '' } = params;\n  if (!imgUrlArr.length) {\n    return;\n  }\n  let imgUrlArrResult = [];\n  for (let i = 0; i < imgUrlArr.length; i++) {\n    (function(i) {\n      // eslint-disable-next-line\n      let xhr = new XMLHttpRequest();\n      console.log(xhr, 'xhr');\n      let xhrUrl = imgUrlArr[i];\n      if (xhrUrl.indexOf('http://') !== -1) {\n        // 截取\n        xhrUrl = xhrUrl.replace('http://', '//');\n      }\n      xhr.open('get', xhrUrl, true);\n      xhr.responseType = 'blob';\n      xhr.onload = function () {\n        // eslint-disable-next-line\n        let img = new Image();\n        let canvas = document.createElement('canvas');\n        let ctx = canvas.getContext('2d');\n        let ratio = getPixelRatio(ctx);\n        // 注意此处有个坑， canvas 要进行缩放\n        canvas.style.width = canvasWith + 'px';\n        canvas.style.height = canvasHeight + 'px';\n        canvas.width = canvasWith * ratio;\n        canvas.height = canvasHeight * ratio;\n        if (xhr.status === 200 || xhr.status === 0) {\n          // 这里面可以直接通过URL的api将其转换，然后赋值给img.src\n          // eslint-disable-next-line\n          let imgurl = URL.createObjectURL(xhr.response);\n          img.src = imgurl;\n          // 图片加载成功\n          img.onload = () => {\n            if (cut) {\n              // 需要裁剪\n              let imgRect = coverImg(canvasWith, canvasHeight, img.width, img.height);\n              ctx.drawImage(img, imgRect.sx, imgRect.sy, imgRect.sWidth, imgRect.sHeight, 0, 0, canvasWith, canvasHeight);\n            } else {\n              // 原图输出\n              canvas.width = img.width * ratio;\n              canvas.height = img.height * ratio;\n              ctx.drawImage(img, 0, 0);\n            }\n            imgUrlArrResult.push(canvas.toDataURL('image/png', 1));\n            // eslint-disable-next-line\n            URL.revokeObjectURL(imgurl);\n            canvas = null;\n            img = null;\n            cb && cb(imgUrlArrResult);\n          };\n          // 图片加载失败\n          img.onerror = () => {\n            console.log('error358: 图片加载失败');\n            failCb && failCb(imgUrlArr[i]);\n          };\n        } else if (xhr.status === 404) {\n          failCb && failCb(imgUrlArr[i]);\n        }\n      };\n      xhr.send();\n    })(i);\n  }\n};\n\nexport const getPixelRatio = (context) => {\n  let backingStore = context.backingStorePixelRatio ||\n  context.webkitBackingStorePixelRatio ||\n  context.mozBackingStorePixelRatio ||\n  context.msBackingStorePixelRatio ||\n  context.oBackingStorePixelRatio ||\n  context.backingStorePixelRatio || 1;\n  return (window.devicePixelRatio || 1) / backingStore;\n};\n\nexport const coverImg = (boxW, boxH, sourceW, sourceH) => {\n  let sx = 0;\n  let sy = 0;\n  let sWidth = sourceW;\n  let sHeight = sourceH;\n  if (sourceW > sourceH || (sourceW === sourceH && boxW < boxH)) {\n    sWidth = boxW * sHeight / boxH;\n    sx = (sourceW - sWidth) / 2;\n  } else if (sourceW < sourceH || (sourceW === sourceH && boxW > boxH)) {\n    sHeight = boxH * sWidth / boxW;\n    sy = (sourceH - sHeight) / 2;\n  }\n  return {\n    sx,\n    sy,\n    sWidth,\n    sHeight\n  };\n};\nexport const containImg = (sx, sy, boxW, boxH, sourceW, sourceH) => {\n  let dx = sx;\n  let dy = sy;\n  let dWidth = boxW;\n  let dHeight = boxH;\n  if (sourceW > sourceH || (sourceW === sourceH && boxW < boxH)) {\n    dHeight = sourceH * dWidth / sourceW;\n    dy = sy + (boxH - dHeight) / 2;\n  } else if (sourceW < sourceH || (sourceW === sourceH && boxW > boxH)) {\n    dWidth = sourceW * dHeight / sourceH;\n    dx = sx + (boxW - dWidth) / 2;\n  }\n  return {\n    dx,\n    dy,\n    dWidth,\n    dHeight\n  };\n};\n\n// 选择车型车系：主软 点评 违章\nexport const choseCar = (param) => {\n  if (Tool.webApp.checkMainApp()) { // 主软和点评\n    // 主软选车\n    // eslint-disable-next-line\n    require('jsBridge');\n    window.jsBridge.selectAutoHomeCar({\n      success: (result) => {\n        // 调用回调吧\n        typeof param.success === 'function' && param.success(result);\n      },\n      fail: (result) => {\n        typeof param.fail === 'function' && param.fail(result);\n      }\n    });\n  } else if (Tool.webApp.checkViolatApp()) {\n    // 违章\n    // choosemodels：选择类型「车系1，车型2」\n    window.location.href = 'wzsdk://cars?choosemodels=2&carsource=newcar';\n\n    window.appCallBack = (json) => {\n      if (json.code === 0) {\n        if (json.extras.type === 14) {\n          typeof param.success === 'function' && param.success(json.extras);\n        } else {\n          typeof param.fail === 'function' && param.fail(json.extras);\n        }\n      }\n    };\n  }\n};\n\n// 添加爱车\nexport const addCar = (params = {}) => {\n  let url = '';\n  let { success = '', fail = '' } = params;\n  if (Tool.webApp.checkAutoHomeApp()) {\n    let linkUrl = encodeURIComponent('rn://CarService_GarageRN/AddOrUpdateCar?fromsource=14&ishideocr=1');\n    url = `autohome://rninsidebrowser?url=${linkUrl}`;\n  } else if (Tool.webApp.checkCarcommentApp()) {\n    url = 'dianpinginside://wzaddcar';\n  } else if (Tool.webApp.checkViolatApp()) {\n    // TODO: 违章渠道没有添加呢\n  }\n\n  require('jsBridge');\n  window.jsBridgeV2.openNativePageAsyncResult({\n    url: url,\n    requestCode: 10000,\n    success: (res) => {\n      console.log('添加爱车成功', JSON.stringify(res));\n      let data = null;\n      if (Tool.checkMobileVersions().ios) { // 苹果\n        data = JSON.parse(res.result);\n      } else {\n        data = res.result.data;\n      }\n      success && success(data);\n    },\n    fail: (err) => {\n      console.log('添加爱车失败', JSON.stringify(err));\n      fail && fail(err);\n    }\n  });\n};\n\n\n/**\n * 获取汽车点评域名\n */\nexport const getRemarkHostUrl = () => {\n  const currentHost = window.location.host;\n  console.log(currentHost);\n  // http://yczj.transparent.yz.test.autohome.com.cn/#/dealerList?type=1  \n  let _URL = '';\n  if (currentHost.slice(20, 24) === 'test') {\n    // 准生产环境\n    _URL = 'http://test.yczj.m.autohome.com.cn';\n  } else if (currentHost.slice(0, 6) === 't.yczj') {\n    // 本地环境\n    // _URL = 'http://test.yczj.m.autohome.com.cn';\n    _URL = 'http://t.yczj.m.autohome.com.cn:3001';\n  } else {\n    // 正式环境\n    _URL = 'https://yczj.m.autohome.com.cn';\n  }\n  return _URL;\n};\n","/**\n * @file 违章 & 主软 & M 登录\n * 获取userid\n */\nimport * as Tool from 'tool';\nexport const getUserId = (params) => {\n  let isAutoApp = Tool.webApp.checkMainApp();\n  let userId = '';\n  if (isAutoApp) {\n    userId = Tool.getCookie('app_userid');\n  }\n  return {\n    userId: userId || 0\n  };\n};\n","import React, { Component } from 'react';\nimport { inject, observer } from 'mobx-react';\n\nimport classNames from 'classnames';\nimport styles from './calendar.scss';\n// import PropTypes from 'prop-types';\n// import * as Tool from 'tool';\n@observer\nexport default class Calendar extends Component {\n  static propTypes = {\n  }\n  constructor (props) {\n    super(props);\n    this.state = {\n      weekdays: ['日', '一', '二', '三', '四', '五', '六'],\n      startDate: this.props.startDate || this.getDateStr(1), // 明天\n      endDate: this.props.endDate || this.getDateStr(30), // 30天之后的日期\n      calendarSource: [],\n      choseDateStr: this.props.startDate || this.getDateStr(1),\n      // { key: '', items: [] }\n      calendarRangeItem: function (key, items) {\n        this.key = key;\n        this.items = items;\n      },\n      // { date: '', disable: '', dateStr: '' }\n      calendarItem: function (date, disable, dateStr) {\n        this.date = date;\n        this.disable = disable;\n        this.dateStr = dateStr;\n      }\n    };\n  }\n  componentDidMount() {\n    this.initCalendarRange();\n  }\n  // 组件销毁前移除事件监听\n  componentWillUnmount(){\n\n  }\n\n\n  // 初始化日历数据\n  initCalendarRange = () => {\n    let calendarSource = [];\n    let startTime = this.parseDate(this.state.startDate);\n    let endTime = this.parseDate(this.state.endDate);\n    let keys = this.generateKeys(startTime, endTime);\n    for (let i = 0; i < keys.length; i++) {\n      let date = keys[i];\n      let daycount = this.getDayCount(date.getFullYear(), date.getMonth());\n      let firstWeekDay = date.getDay();\n      // eslint-disable-next-line\n      let crItem = new this.state.calendarRangeItem(date, []);\n      for (let j = 0; j < firstWeekDay; j++) {\n        // eslint-disable-next-line\n        let item1 = new this.state.calendarItem('', '', true, '');\n        crItem.items.push(item1);\n      }\n      for (let z = 1; z <= daycount; z++) {\n        let itemDay = new Date(date.getFullYear(), date.getMonth(), z);\n        let disabled = false;\n        if (itemDay < startTime || itemDay > endTime) {\n          disabled = true;\n        }\n        let dateStr = this.formateDate(itemDay);\n        // eslint-disable-next-line\n        let item2 = new this.state.calendarItem(itemDay, disabled, dateStr);\n        crItem.items.push(item2);\n      }\n      calendarSource.push(crItem);\n    }\n    this.setState({\n      calendarSource: calendarSource\n    });\n  }\n\n  // 获取开始时间 结束时间\n  getDateStr = (AddDayCount) => {\n    let dd = new Date();\n    dd.setDate(dd.getDate() + AddDayCount); // 获取AddDayCount天后的日期\n    let y = dd.getFullYear();\n    let m = (dd.getMonth() + 1) < 10 ? '0' + (dd.getMonth() + 1) : (dd.getMonth() + 1); // 获取当前月份的日期，不足10补0\n    let d = dd.getDate() < 10 ? '0' + dd.getDate() : dd.getDate(); // 获取当前几号，不足10补0\n    return y + '-' + m + '-' + d;\n  }\n\n  // 获取当月总天数\n  getDayCount = (year, month) => {\n    let dict = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    if (month === 1) {\n      if ((year % 400 === 0) || (year % 4 === 0 && year % 100 !== 0)) {\n        return 29;\n      }\n    }\n    return dict[month];\n  }\n\n  // 日期转化成标准时间\n  parseDate = (dateStr) => {\n    let timeArray = dateStr.split('-');\n    return new Date(timeArray[0], timeArray[1] - 1, timeArray[2]);\n  }\n\n  // 根据开始时间 结束时间 获取有多少个月\n  generateKeys = (startTime, endTime) => {\n    let keys = [];\n    let startMonthDate = new Date(startTime.getFullYear(), startTime.getMonth(), 1);\n    let endMonthDate = new Date(endTime.getFullYear(), endTime.getMonth(), 1);\n    // eslint-disable-next-line\n    while (startMonthDate < endMonthDate) {\n      let date = new Date(startMonthDate.getFullYear(), startMonthDate.getMonth(), 1);\n      keys.push(date);\n      startMonthDate.setMonth(startMonthDate.getMonth() + 1);\n    }\n    keys.push(endMonthDate);\n    return keys;\n  }\n\n  // 格式化日期 2018-02-01\n  formateDate = (dd) => {\n    let y = dd.getFullYear();\n    let m = dd.getMonth() + 1; // 获取当前月份的日期\n    let d = dd.getDate();\n    return y + '-' + (m > 9 ? m : '0' + m) + '-' + (d > 9 ? d : '0' + d);\n  }\n\n\n  // 隐藏日历控件\n  handleHide = () => {\n    setTimeout(() => {\n      this.props.hideCalendar();\n    }, 200);\n  }\n\n  // 确认日期\n  confirmDate = () => {\n    this.props.confirmDate(this.state.choseDateStr);\n  }\n\n  // 选择日期\n  selectDate = (date) => {\n    if (date.disable !== '' && !date.disable && date.dateStr !== this.state.choseDateStr) {\n      this.setState({\n        choseDateStr: date.dateStr\n      });\n    }\n  }\n\n\n  formateKey = (value) => {\n    if (value) {\n      let y = value.getFullYear();\n      let m = value.getMonth() + 1; // 获取当前月份的日期\n      return y + '年' + m + '月';\n    } else {\n      return null;\n    }\n  }\n\n  formateday = (value) => {\n    if (value) {\n      return value.getDate();\n    } else {\n      return null;\n    }\n  }\n\n\n  render() {\n    const { show } = this.props;\n    const { weekdays, calendarSource, choseDateStr } = this.state;\n    return (\n      show && calendarSource.length > 0 &&  (<div className={ styles.calendar }>\n        <div className={ styles.transparent_mask } onClick={ this.handleHide }></div>\n        <div className={ classNames(styles.calendar_main, show && calendarSource.length > 0 ? styles.show : '') }>\n          <div className={ styles.header }>\n            日期选择\n          </div>\n          <div className={ styles.weekdays }>\n            <ul>\n              {\n                weekdays.map((item) => {\n                  return (\n                    <li key={ item }>\n                      <span>{ item }</span>\n                    </li>\n                  );\n                })\n              }\n            </ul>\n          </div>\n          <div className={ styles.contents }>\n            {\n              calendarSource.map((item, index) => {\n                return (\n                  <div className={ styles.picker_inner } key={ index }>\n                    <div className={ styles.months }>{ this.formateKey(item.key) }</div>\n                    <div className={ styles.days }>\n                      <ul>\n                        {\n                          item.items.map((date, dateIndex) => {\n                            return (\n                              <li key={ dateIndex }>\n                                <span className={ classNames(date.disable ? styles.unable : '', date.dateStr === choseDateStr ? styles.active : '' ) } onClick={ this.selectDate.bind(this, date) }>{ this.formateday(date.date) }</span>\n                              </li>\n                            );\n                          })\n                        }\n                      </ul>\n                    </div>\n                  </div>\n                );\n              })\n            }\n          </div>\n        </div>\n        <div className={ styles.confirmate_btn_box }>\n          <div className={ styles.confirmate_btn } onClick={ this.confirmDate }>确认</div>\n        </div>\n      </div>)\n    );\n  }\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"transparent_mask\":\"transparent_mask__db068725\",\"calendar_main\":\"calendar_main__6191750c\",\"show\":\"show__a0c056aa\",\"header\":\"header__9d77cc2b\",\"weekdays\":\"weekdays__0bd19a75\",\"contents\":\"contents__34222268\",\"months\":\"months__5fccf01c\",\"days\":\"days__ef70e21b\",\"unable\":\"unable__d47e934c\",\"active\":\"active__52026623\",\"confirmate_btn_box\":\"confirmate_btn_box__63507e11\",\"confirmate_btn\":\"confirmate_btn__0acbc33a\"};"],"sourceRoot":""}