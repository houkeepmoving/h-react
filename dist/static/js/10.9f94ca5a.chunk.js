(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{126:function(e,t,a){e.exports={"fn-left":"fn-left__0e5a4cba","fn-right":"fn-right__cf65ad14",wrap:"wrap__86cad531","fn-block":"fn-block__d0f84f58","fn-hide":"fn-hide__4c3073a6",fl:"fl__66d0e0ff",fr:"fr__512d4236",bg:"bg__e81f319a",dealer_list_container:"dealer_list_container__21b35f15",dealer_list_wrapper:"dealer_list_wrapper__da6f9f0c",dealer_list:"dealer_list__e6bc3d35",dealer_item:"dealer_item__ef65dd3c",dealer_wrapper:"dealer_wrapper__afc92ac3",dealer_info:"dealer_info__39f86a3a",name:"name__2e879986",tag_4s:"tag_4s__5896ee97",car_info_wrapper:"car_info_wrapper__b50af38a",padding_top:"padding_top__6801a4ec",cell:"cell__bbe289c2",bd:"bd__827544b6",ft:"ft__6c27c4a5",date_wrapper:"date_wrapper__e73a6c50",header_maintain_padding:"header_maintain_padding__ade48427",slide_wrapper:"slide_wrapper__60603833",slide_box:"slide_box__6db309d2",date_item:"date_item__03d95675",active:"active__fc6e127e",date:"date__f9165057",week:"week__0c77c6fd",icon_calendar:"icon_calendar__250fb575",dealer_filter:"dealer_filter__41f014a1",filter_item:"filter_item__2f738304",current:"current__740a58d8",icon_arrow_down:"icon_arrow_down__445756f2",icon_arrow_up:"icon_arrow_up__3446e135",drop_down:"drop_down__78b9fd8a",zone_model:"zone_model__6e3eb062",sort_model:"sort_model__398f5d94",zone:"zone__3ff6a76e",zoneFilter:"zoneFilter__99544b83",sort:"sort__13c0d67e",is_activity_or_package:"is_activity_or_package__0b024501",img_box:"img_box__71a784dd",is_transparent:"is_transparent__6a07db4e",orange_tag:"orange_tag__fe047d5e",stars:"stars__a38acfb0",price:"price__5790ca4b",address:"address__ee6450fb",area:"area__427c1469",activity_list:"activity_list__3006cea4",activity_item:"activity_item__148529f0",btn_book:"btn_book__ef85e32f",package_item:"package_item__b91aca79",detail:"detail__1c0f4e84"}},207:function(e,t,a){"use strict";a.r(t);var n,r,s=a(97),o=a(5),i=a(6),c=a(21),l=a(20),d=a(22),m=a(0),u=a.n(m),p=a(16),_=a(33),f=a.n(_),h=a(126),g=a.n(h),v=a(12),I=a(85),y=a(84),b=a(34),w=a(86),D=a(90),N=a(91),k=a(87),C=a(94),E=a(93),S=a.n(E),L=Object(b.c)(n=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={src:a.props.src?a.props.src:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleImageLoaded",value:function(){}},{key:"handleImageErrored",value:function(){this.setState({src:"//x.autoimg.cn/cfw/cfw/common/auto-bendi-dianping/auto-dealer-list-placeholder.png"})}},{key:"render",value:function(){var e=this.props,t=this.state.src;return u.a.createElement(S.a,null,u.a.createElement("img",Object.assign({},e,{src:t,onLoad:this.handleImageLoaded.bind(this),onError:this.handleImageErrored.bind(this)})))}}]),t}(u.a.Component))||n;a.d(t,"default",(function(){return T}));var T=Object(b.b)("Toast","ComNoContent","Header","DealerList")(r=Object(b.c)(r=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).handleAddCar=function(){y.a({success:function(e){if(v.o.checkAutoHomeApp()){var t=e.carInfo,a={brandId:t.brandid,brandName:t.brandname,seriesId:t.seriesid,seriesName:t.seriesname,specId:t.specid,specName:t.specname,plateNum:t.licensenum};n.setState({carInfo:a},(function(){0===n.state.default?n.getUserPosition():(n.getDealerListFilter(),n.getDealerList())}))}else v.o.checkCarcommentApp()?window.location.reload():v.o.checkViolatApp()},fail:function(e){0===n.state.default?n.getUserPosition():(n.getDealerListFilter(),n.getDealerList()),n.props.Toast.$toast(e.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}})},n.handleChooseCar=function(){if(n.state.isBreakDownWxProgram)return!1;y.b({success:function(e){if(v.o.checkMainApp())n.handleTrackCustomEvent("tmfy_dealer_list_choose_car_click",e.result.data.specId),n.setState({carInfo:e.result.data},(function(){n.getDealerListFilter(),n.getDealerList()}));else if(v.o.checkViolatApp()&&0===e.code&&14===e.extras.type){var t=e.extras,a=t.brandid,r=t.brandname,s=t.seriesid,o=t.seriesname,i=t.specid,c=t.specname;n.handleTrackCustomEvent("tmfy_dealer_list_choose_car_click",i);var l={brandId:a,brandName:r,seriesId:s,seriesName:o,specId:i,specName:c};n.setState({carInfo:l},(function(){n.getDealerListFilter(),n.getDealerList()}))}},fail:function(e){}})},n.initDateList=function(){for(var e=[],t=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],a=new Date,r=a,s=1;s<=30;s++){var o=(r=new Date(a.setDate(a.getDate()+1))).getFullYear(),i=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,c=r.getDate()<10?"0"+r.getDate():r.getDate(),l=r.getDay(),d={fullDay:"".concat(o,"-").concat(i,"-").concat(c),date:"".concat(i,"-").concat(c),week:t[l]};1===s&&(n.setState({selectDate:"".concat(o,"-").concat(i,"-").concat(c)}),d.week="\u660e\u65e5"),e.push(d)}n.setState({dateList:e})},n.getUserPosition=function(){a(25),v.o.checkMainApp()?window.jsBridgeV2.realtimelocation({success:function(e){var t=e.result;window.jsBridgeV2.getSyncCity({success:function(e){var a=e.result,r=Number(a.cityId)||110100;n.setState({cityId:r,latitude:t.BDLatitude,longitude:t.BDLongitude},(function(){n.getDealerListFilter(),n.getDealerList()}))},fail:function(e){n.setState({latitude:t.BDLatitude,longitude:t.BDLongitude},(function(){n.getDealerListFilter(),n.getDealerList()}))}})},fail:function(e){window.jsBridgeV2.getSyncCity({success:function(t){var a=t.result,r=Number(a.cityId)||110100;n.setState({cityId:r,latitude:e.result.latitude||"",longitude:e.result.longitude||""},(function(){n.getDealerListFilter(),n.getDealerList()}))},fail:function(t){n.setState({latitude:e.result.latitude||"",longitude:e.result.longitude||""},(function(){n.getDealerListFilter(),n.getDealerList()}))}})}}):v.o.checkViolatApp()||(n.getDealerListFilter(),n.getDealerList())},n.getDealerListFilter=function(){var e={areaCode:n.state.selectAreaCode,cityCode:n.state.cityId,latitude:n.state.latitude,longitude:n.state.longitude,sortType:n.state.selectSort.sort,zoneId:n.props.DealerList.dealerList.currentZone.id||-1};n.props.DealerList.getDealerListFilters(e).catch((function(e){n.props.Toast.$toast(e.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}))},n.clearData=function(){n.setState({dealerList:[],pageNum:1,isGetMore:!1,loadMore:{show:!1,text:"\u52a0\u8f7d\u4e2d..."}})},n.getDealerList=function(){n.setState({isLoading:!0}),n.props.ComNoContent.$comConntent(""),n.setState({dealerList:[],pageNum:1,isGetMore:!1,loadMore:{show:!1,text:"\u52a0\u8f7d\u4e2d..."}},(function(){var e={areaCode:n.state.selectAreaCode,carBrandId:n.state.carInfo?n.state.carInfo.brandId:"",cityCode:n.state.cityId,latitude:n.state.latitude,longitude:n.state.longitude,listType:n.state.listType,pageNum:1,pageSize:20,sortType:n.state.selectSort.sort,zoneId:n.props.DealerList.dealerList.currentZone.id||-1,defaultCondition:n.state.default};p.a.getDealerList(e).then((function(e){if(0!==e.returncode||!e.result.list)return Promise.reject(e);n.setState({isLoading:!1});var t=e.result.list.length>=20;e.result.list.length>0?n.setState({dealerList:e.result.list,isGetMore:t,loadMore:{show:!0,text:t?"\u52a0\u8f7d\u4e2d...":"\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210"}}):n.props.ComNoContent.$comConntent("\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u5546\u5bb6\uff0c\u6362\u6761\u4ef6\u8bd5\u8bd5")})).catch((function(e){n.setState({isLoading:!1}),n.clearData(),n.props.ComNoContent.$comConntent(e.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}))}))},n.getDealerListMore=function(){n.state.isGetMore&&n.setState({isGetMore:!1,pageNum:n.state.pageNum+1,loadMore:{show:!1,text:"\u52a0\u8f7d\u4e2d"}},(function(){var e={areaCode:n.state.selectAreaCode,carBrandId:n.state.carInfo?n.state.carInfo.brandId:"",cityCode:n.state.cityId,latitude:n.state.latitude,longitude:n.state.longitude,listType:n.state.listType,pageNum:n.state.pageNum,pageSize:20,sortType:n.state.selectSort.sort,zoneId:n.props.DealerList.dealerList.currentZone.id||-1,defaultCondition:n.state.default};p.a.getDealerList(e).then((function(e){if(0===e.returncode&&e.result.list){var t=e.result.list&&e.result.list.length>=20;n.setState({dealerList:[].concat(Object(s.a)(n.state.dealerList),Object(s.a)(e.result.list)),isGetMore:t,loadMore:{show:!0,text:t?"\u52a0\u8f7d\u4e2d...":"\u5168\u90e8\u52a0\u8f7d\u5b8c\u6210"}})}else Promise.reject(e)})).catch((function(e){n.clearData(),n.props.ComNoContent.$comConntent(e.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}))}))},n.handleLinkToReservationDetail=function(e,t,a){if(n.handleTrackCustomEvent("tmfy_dealer_list_book_click",e.id,{position:t}),a.stopPropagation(),!n.state.carInfo)return n.props.Toast.$toast("\u8bf7\u9009\u62e9\u8f66\u8f86"),!1;var r={type:n.state.listType,selectDate:n.state.selectDate,itemIds:v.g("itemIds")||"",dealerId:e.id,oldDealerId:e.oldDealerId,plateNumber:encodeURIComponent(encodeURIComponent(n.state.carInfo.plateNum))||"",brandId:n.state.carInfo.brandId,seriesId:n.state.carInfo.seriesId,specId:n.state.carInfo.specId,travelDistance:v.g("travelDistance")||0};y.f("reservationDetail",r)},n.handleLinkToActivity=function(e,t){n.handleTrackCustomEvent("tmfy_dealer_list_dealer_activity_click",e.activityId),t.stopPropagation();var a=window.location.host.indexOf("test")>-1?"http://youche-h5.yz.test.autohome.com.cn":"https://youche.m.autohome.com.cn",r="".concat(a,"/app/mt/as/detail/").concat(e.activityId,"?pvareaid=&orderfrom=2");y.f(r)},n.handleLinkToBucket=function(e,t){n.handleTrackCustomEvent("tmfy_dealer_list_maintain_detail_click",e.comboId);var a=n.state.query;if(t.stopPropagation(),!n.state.carInfo)return n.props.Toast.$toast("\u8bf7\u9009\u62e9\u8f66\u8f86"),!1;var r={itemIds:a.itemIds,brandId:n.state.carInfo.brandId,brandName:encodeURIComponent(encodeURIComponent(n.state.carInfo.brandName)),seriesName:encodeURIComponent(encodeURIComponent(n.state.carInfo.seriesName)),specName:encodeURIComponent(encodeURIComponent(n.state.carInfo.specName)),plateNumber:encodeURIComponent(encodeURIComponent(n.state.carInfo.plateNum))||"",travelDistance:a.travelDistance,selectDate:n.state.selectDate,dealerId:e.dealerId,oldDealerId:e.oldDealerId,comboId:e.comboId,seriesId:n.state.carInfo.seriesId,specId:n.state.carInfo.specId};y.f("serviceDetail",r)},n.handleLinkToDealerDetail=function(e,t){if(n.handleTrackCustomEvent("tmfy_dealer_list_dealer_item_click",e.id,{position:t}),!n.state.carInfo)return n.props.Toast.$toast("\u8bf7\u9009\u62e9\u8f66\u8f86"),!1;var a={type:n.state.listType,selectDate:n.state.selectDate,itemIds:v.g("itemIds")||"",dealerId:e.id,oldDealerId:e.oldDealerId,plateNumber:encodeURIComponent(encodeURIComponent(n.state.carInfo.plateNum))||"",brandId:n.state.carInfo.brandId,seriesId:n.state.carInfo.seriesId,specId:n.state.carInfo.specId,brandName:encodeURIComponent(encodeURIComponent(n.state.carInfo.brandName)),seriesName:encodeURIComponent(encodeURIComponent(n.state.carInfo.seriesName)),specName:encodeURIComponent(encodeURIComponent(n.state.carInfo.specName)),travelDistance:v.g("travelDistance")||0,latitude:n.state.latitude,longitude:n.state.longitude,cityId:n.state.cityId};y.f("businessDetail",a)},n.handleSwitchArea=function(e,t){t.stopPropagation(),n.props.DealerList.handleChangeArea(e)},n.handleSwitchZone=function(e){n.handleTrackCustomEvent("tmfy_dealer_list_choose_area_click",e.id),n.setState({default:1,selectAreaCode:n.props.DealerList.dealerList.currentArea.code},(function(){n.getDealerList()})),n.props.DealerList.handleChangeZone(e)},n.handleSwitchSort=function(e){n.handleTrackCustomEvent("tmfy_dealer_list_choose_order_rule_click",{comprehensive:1,score:2,transparency:3,distance:4}[e.sort]),n.setState({default:1,selectSort:e},(function(){n.getDealerList()}))},n.handleSwitchZoneFileter=function(){n.setState({isShowZoneFiler:!n.state.isShowZoneFiler,isShowSortFilter:!1})},n.handleSwitchSortFileter=function(){n.setState({isShowZoneFiler:!1,isShowSortFilter:!n.state.isShowSortFilter})},n.handleShowCalendar=function(){n.handleTrackCustomEvent("tmfy_dealer_list_choose_date_click"),n.overflowLayer(),n.setState({isShowCalendar:!0})},n.handleSwitchDate=function(e,t){n.handleTrackCustomEvent("tmfy_dealer_list_choose_date_click");var a=document.documentElement.clientHeight||document.body.clientHeight;a=a>375?375:a;var r=t.target.offsetLeft+t.target.offsetWidth/2-n.refs.scroll.offsetWidth/2-10/375*a;v.k(n.refs.scroll,"scrollLeft",r,300),n.setState({selectDate:e})},n.handleHideCalendar=function(){n.overflowLayer(),n.setState({isShowCalendar:!1})},n.handleConfirmDate=function(e){for(var t=0,a=0;a<n.state.dateList.length;a++)if(n.state.dateList[a].fullDay===e){t=a;break}var r=document.documentElement.clientHeight||document.body.clientHeight;r=r>375?375:r;var s=n.date[t].offsetLeft-20/375*r;v.k(n.refs.scroll,"scrollLeft",s,300),n.overflowLayer(),n.setState({selectDate:e,isShowCalendar:!1})},n.overflowLayer=function(){n.state.isShowCalendar?(document.documentElement.scrollTop=n.state.scrollTopCatchValue,document.body.scrollTop=n.state.scrollTopCatchValue,document.body.style.overflow="",document.documentElement.style.overflow="",document.body.style.height="",document.documentElement.style.height=""):(n.setState({scrollTopCatchValue:document.body.scrollTop||document.documentElement.scrollTop}),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.height="100%")};var r=window.navigator.userAgent.toLowerCase();return n.state={query:v.h(),isHeaderShow:!v.o.checkMainApp()&&!(r.match(/MicroMessenger/i)&&"micromessenger"===r.match(/MicroMessenger/i)[0]),goTop:!1,getMoreFlag:!0,carInfo:null,isShowCalendar:!1,isShowZoneFiler:!1,isShowSortFilter:!1,dateList:[],selectDate:"",selectSort:{name:"\u667a\u80fd\u6392\u5e8f",sort:"comprehensive"},selectAreaCode:-1,cityId:110100,latitude:"",longitude:"",listType:1,default:0,dealerList:[],pageNum:1,isGetMore:!1,loadMore:{show:!1,text:"\u52a0\u8f7d\u4e2d..."},scrollTopCatchValue:0,isLoading:!1,isBreakDownWxProgram:!1},n.date=[],n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=I.a().userId;y.i({pageId:"tmfy_dealer_list_pv",site_id:1211120,category_id:1595,sub_category_id:18466},{userId:t,type:parseInt(v.g("type"))});var a=this.state.query;if(void 0!==a.pvareaid&&v.l("transparent_pvareaid",a.pvareaid),a.isFaultMini&&v.l("isFaultMini",a.isFaultMini),this.setState({isBreakDownWxProgram:v.o.isBreakDownWxProgram()},(function(){console.log("\u6545\u969c\u901a\u5c0f\u7a0b\u5e8f"),console.log(e.state.isBreakDownWxProgram)})),this.props.Header.$setTitle("\u95e8\u5e97\u9009\u62e9"),v.n("\u95e8\u5e97\u9009\u62e9"),this.setState({listType:0===parseInt(v.g("type"))?0:1}),setTimeout((function(){e.initDateList()}),100),this.setState({isLoading:!0}),1===parseInt(v.g("type")))p.a.getMyCarList({}).then((function(t){if(0!==t.returncode){if(501===t.returncode){var a=encodeURIComponent(window.location.href);return y.d({backUrl:a,queryParams:{},successCb:function(e){window.location.reload()},failCb:function(e){}}),Promise.reject(t)}return Promise.reject(t)}if(t.result.carInfo.length>0){var n={brandId:t.result.carInfo[0].carBrandId,brandName:t.result.carInfo[0].carBrandName,seriesId:t.result.carInfo[0].carSeriesId,seriesName:t.result.carInfo[0].carSeriesName,specId:t.result.carInfo[0].carSpecId,specName:t.result.carInfo[0].carSpecName,plateNum:t.result.carInfo[0].carNum||""};e.setState({carInfo:n},(function(){0===e.state.default?e.getUserPosition():(e.getDealerListFilter(),e.getDealerList())}))}else v.o.checkMainApp()||v.o.checkViolatApp()?e.handleAddCar():(e.getDealerListFilter(),e.getDealerList())})).catch((function(t){e.props.ComNoContent.$comConntent(t.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}));else{var n={brandId:a.brandId,brandName:decodeURIComponent(decodeURIComponent(a.brandName)),seriesId:a.seriesId,seriesName:decodeURIComponent(decodeURIComponent(a.seriesName)),specId:a.specId,specName:decodeURIComponent(decodeURIComponent(a.specName)),plateNum:decodeURIComponent(decodeURIComponent(a.plateNumber))||""};this.setState({carInfo:n},(function(){0===e.state.default?e.getUserPosition():(e.getDealerListFilter(),e.getDealerList())}))}window.addEventListener("scroll",(function(){e.setState({goTop:document.documentElement.scrollTop>400||document.body.scrollTop>400}),v.f()<=v.i()+v.e()+20&&e.getDealerListMore()}),!1)}},{key:"handleTrackCustomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=I.a(),r=n.userId;trackCustomEvent("yc_page_common_click",{bus:"1",refpage:v.d("refpage"),channel:v.d("channel"),city:v.d("cityId")||110100,action:e},Object.assign({userId:r,objectId:t,type:parseInt(v.g("type"))},a))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.goTop,r=t.carInfo,s=t.isHeaderShow,o=t.isShowCalendar,i=t.isShowZoneFiler,c=t.isShowSortFilter,l=t.dateList,d=t.selectDate,m=t.selectSort,p=t.listType,_=t.dealerList,h=t.loadMore,v=t.isBreakDownWxProgram,I=this.props.DealerList.dealerList,y=I.filters,b=I.currentArea,E=I.currentZone,S=I.currentZoneList,T=I.showArea;return l.length>0&&u.a.createElement("div",{className:g.a.dealer_list_container},1===p&&!v&&u.a.createElement("section",{className:f()(g.a.car_info_wrapper,s?g.a.padding_top:""),onClick:this.handleChooseCar},u.a.createElement("div",{className:g.a.cell},u.a.createElement("div",{className:g.a.bd},r?r.seriesName+" "+r.specName:"\u8bf7\u9009\u62e9\u8f66\u8f86"),u.a.createElement("div",{className:g.a.ft}))),1===p&&v&&u.a.createElement("section",{className:f()(g.a.car_info_wrapper,s?g.a.padding_top:""),onClick:this.handleChooseCar},u.a.createElement("div",{className:g.a.cell},u.a.createElement("div",{className:g.a.bd},r?r.seriesName+" "+r.specName:"\u8bf7\u9009\u62e9\u8f66\u8f86"))),u.a.createElement("section",{className:f()(g.a.date_wrapper,s?g.a.padding_top:"",1!==p||s?"":g.a.header_maintain_padding)},u.a.createElement("div",{className:g.a.slide_wrapper,ref:"scroll"},u.a.createElement("div",{className:g.a.slide_box},l.map((function(t,a){return u.a.createElement("div",{className:f()(g.a.date_item,t.fullDay===d?g.a.active:""),ref:function(t){return e.date[a]=t},key:t.date,onClick:e.handleSwitchDate.bind(e,t.fullDay)},u.a.createElement("div",{className:g.a.city_wrapper},t.date),u.a.createElement("div",{className:g.a.week},t.week))})))),u.a.createElement("div",{className:g.a.icon_calendar,onClick:this.handleShowCalendar})),u.a.createElement("section",{className:f()(g.a.dealer_filter,s?g.a.padding_top:"",1!==p||s?"":g.a.header_maintain_padding)},u.a.createElement("div",{className:f()(g.a.filter_item,i?g.a.active:""),onClick:this.handleSwitchZoneFileter},u.a.createElement("div",{className:g.a.current},T," ",u.a.createElement("i",{className:i?g.a.icon_arrow_up:g.a.icon_arrow_down})),i&&u.a.createElement("div",{className:f()(g.a.drop_down,s?g.a.padding_top:"",1!==p||s?"":g.a.header_maintain_padding)},u.a.createElement("div",{className:g.a.zone_model},u.a.createElement("div",{className:g.a.zone},u.a.createElement("ul",null,y&&"area"in y&&y.area.length>0&&y.area.map((function(t){return u.a.createElement("li",{key:t.code,className:b.code===t.code?g.a.active:"",onClick:e.handleSwitchArea.bind(e,t)},t.name)})))),u.a.createElement("div",{className:g.a.zoneFilter},u.a.createElement("ul",null,S.length>0&&S.map((function(t){return u.a.createElement("li",{key:t.id,className:E.id===t.id?g.a.active:"",onClick:e.handleSwitchZone.bind(e,t)},t.name)}))))))),u.a.createElement("div",{className:f()(g.a.filter_item,c?g.a.active:""),onClick:this.handleSwitchSortFileter},u.a.createElement("div",{className:g.a.current},m.name," ",u.a.createElement("i",{className:c?g.a.icon_arrow_up:g.a.icon_arrow_down})),c&&u.a.createElement("div",{className:f()(g.a.drop_down,s?g.a.padding_top:"",1!==p||s?"":g.a.header_maintain_padding)},u.a.createElement("div",{className:g.a.sort_model},u.a.createElement("div",{className:g.a.sort},u.a.createElement("ul",null,y&&"sort"in y&&y.sort.length>0&&y.sort.map((function(t){return u.a.createElement("li",{key:t.sort,className:m.sort===t.sort?g.a.active:"",onClick:e.handleSwitchSort.bind(e,t)},t.name)})))))))),u.a.createElement("section",{className:f()(g.a.dealer_list_wrapper,1===p?g.a.padding_top:"")},u.a.createElement("ul",{className:g.a.dealer_list},_.map((function(t,a){return u.a.createElement("li",{key:t.id,className:f()(g.a.dealer_item,t.activity||t.pack?g.a.is_activity_or_package:""),onClick:e.handleLinkToDealerDetail.bind(e,t,a)},u.a.createElement("div",{className:g.a.dealer_wrapper},u.a.createElement("div",{className:f()(g.a.img_box,t.transparencyScore&&t.transparencyScore>0?g.a.is_transparent:"")},u.a.createElement(L,{src:t.headImage}),"transparencyScore"in t&&t.transparencyScore>0&&u.a.createElement("div",{className:g.a.orange_tag},"\u900f\u660e\u5ea6",t.transparencyScore)),u.a.createElement("div",{className:g.a.dealer_info},u.a.createElement("div",{className:g.a.name},u.a.createElement("div",{className:g.a.tag_4s}),t.name),u.a.createElement("div",{className:g.a.stars},u.a.createElement(C.a,{width:t.score,className:g.a.star}),"price"in t&&u.a.createElement("div",{className:g.a.price},u.a.createElement("span",null,"\uffe5",t.price)," \u8d77")),u.a.createElement("div",{className:g.a.address},u.a.createElement("div",{className:g.a.area},u.a.createElement("i",{className:g.a.icon_map}),t.zoneName),t.distance&&u.a.createElement("div",{className:g.a.distance},(n=t.distance)<500?"\uff1c500m":n<1e3?"".concat(Math.floor(n),"m"):n<1e5?"".concat(Math.floor(n/1e3),"km"):"\uff1e100km")),u.a.createElement("div",{className:g.a.activity_list},t.labels&&t.labels.length>0&&t.labels.map((function(e){return u.a.createElement("div",{key:e,className:g.a.activity_item},e)}))),u.a.createElement("div",{className:g.a.btn_book,onClick:e.handleLinkToReservationDetail.bind(e,t,a)},"\u9884\u7ea6"))),0===p&&t.pack&&u.a.createElement("div",{className:g.a.package_item,onClick:e.handleLinkToBucket.bind(e,t.pack)},u.a.createElement("div",{className:g.a.sort},"\u5957\u9910"),u.a.createElement("div",{className:g.a.name},t.pack.title),u.a.createElement("div",{className:g.a.detail},"\u67e5\u770b\u8be6\u60c5")),0===p&&t.activity&&u.a.createElement("div",{className:g.a.package_item,onClick:e.handleLinkToActivity.bind(e,t.activity)},u.a.createElement("div",{className:g.a.sort},"\u6d3b\u52a8"),u.a.createElement("div",{className:g.a.name},t.activity.asTitle),u.a.createElement("div",{className:g.a.detail},"\u67e5\u770b\u8be6\u60c5")));var n})))),u.a.createElement(D.a,{ref:"loadingMore",show:h.show,text:h.text}),u.a.createElement(N.a,{goTop:n}),u.a.createElement(w.a,{show:a}),u.a.createElement(k.a,{show:o,hideCalendar:this.handleHideCalendar,confirmDate:this.handleConfirmDate}))}}]),t}(u.a.Component))||r)||r},87:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n,r=a(5),s=a(6),o=a(21),i=a(20),c=a(22),l=a(0),d=a.n(l),m=a(34),u=a(33),p=a.n(u),_=a(88),f=a.n(_),h=Object(m.c)(n=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).initCalendarRange=function(){for(var e=[],t=a.parseDate(a.state.startDate),n=a.parseDate(a.state.endDate),r=a.generateKeys(t,n),s=0;s<r.length;s++){for(var o=r[s],i=a.getDayCount(o.getFullYear(),o.getMonth()),c=o.getDay(),l=new a.state.calendarRangeItem(o,[]),d=0;d<c;d++){var m=new a.state.calendarItem("","",!0,"");l.items.push(m)}for(var u=1;u<=i;u++){var p=new Date(o.getFullYear(),o.getMonth(),u),_=!1;(p<t||p>n)&&(_=!0);var f=a.formateDate(p),h=new a.state.calendarItem(p,_,f);l.items.push(h)}e.push(l)}a.setState({calendarSource:e})},a.getDateStr=function(e){var t=new Date;return t.setDate(t.getDate()+e),t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())},a.getDayCount=function(e,t){return 1===t&&(e%400===0||e%4===0&&e%100!==0)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},a.parseDate=function(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])},a.generateKeys=function(e,t){for(var a=[],n=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth(),1);n<r;){var s=new Date(n.getFullYear(),n.getMonth(),1);a.push(s),n.setMonth(n.getMonth()+1)}return a.push(r),a},a.formateDate=function(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t+"-"+(a>9?a:"0"+a)+"-"+(n>9?n:"0"+n)},a.handleHide=function(){setTimeout((function(){a.props.hideCalendar()}),200)},a.confirmDate=function(){a.props.confirmDate(a.state.choseDateStr)},a.selectDate=function(e){""===e.disable||e.disable||e.dateStr===a.state.choseDateStr||a.setState({choseDateStr:e.dateStr})},a.formateKey=function(e){return e?e.getFullYear()+"\u5e74"+(e.getMonth()+1)+"\u6708":null},a.formateday=function(e){return e?e.getDate():null},a.state={weekdays:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],startDate:a.props.startDate||a.getDateStr(1),endDate:a.props.endDate||a.getDateStr(30),calendarSource:[],choseDateStr:a.props.startDate||a.getDateStr(1),calendarRangeItem:function(e,t){this.key=e,this.items=t},calendarItem:function(e,t,a){this.date=e,this.disable=t,this.dateStr=a}},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initCalendarRange()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.show,a=this.state,n=a.weekdays,r=a.calendarSource,s=a.choseDateStr;return t&&r.length>0&&d.a.createElement("div",{className:f.a.calendar},d.a.createElement("div",{className:f.a.transparent_mask,onClick:this.handleHide}),d.a.createElement("div",{className:p()(f.a.calendar_main,t&&r.length>0?f.a.show:"")},d.a.createElement("div",{className:f.a.header},"\u65e5\u671f\u9009\u62e9"),d.a.createElement("div",{className:f.a.weekdays},d.a.createElement("ul",null,n.map((function(e){return d.a.createElement("li",{key:e},d.a.createElement("span",null,e))})))),d.a.createElement("div",{className:f.a.contents},r.map((function(t,a){return d.a.createElement("div",{className:f.a.picker_inner,key:a},d.a.createElement("div",{className:f.a.months},e.formateKey(t.key)),d.a.createElement("div",{className:f.a.days},d.a.createElement("ul",null,t.items.map((function(t,a){return d.a.createElement("li",{key:a},d.a.createElement("span",{className:p()(t.disable?f.a.unable:"",t.dateStr===s?f.a.active:""),onClick:e.selectDate.bind(e,t)},e.formateday(t.date)))})))))})))),d.a.createElement("div",{className:f.a.confirmate_btn_box},d.a.createElement("div",{className:f.a.confirmate_btn,onClick:this.confirmDate},"\u786e\u8ba4")))}}]),t}(l.Component))||n},88:function(e,t,a){e.exports={transparent_mask:"transparent_mask__db068725",calendar_main:"calendar_main__6191750c",show:"show__a0c056aa",header:"header__9d77cc2b",weekdays:"weekdays__0bd19a75",contents:"contents__34222268",months:"months__5fccf01c",days:"days__ef70e21b",unable:"unable__d47e934c",active:"active__52026623",confirmate_btn_box:"confirmate_btn_box__63507e11",confirmate_btn:"confirmate_btn__0acbc33a"}},94:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(33),o=a.n(s);a(95);t.a=function(e){var t=e.width,a=void 0===t?"80%":t,n=[1,2,3,4,5];return r.a.createElement("div",{className:"star","data-role":"star"},r.a.createElement("div",{className:"comment_star"},r.a.createElement("span",{className:"dark"},n.map((function(e,t){return r.a.createElement("i",{className:o()("icon_collect"),key:t})}))),r.a.createElement("span",{className:"light",style:{width:a}},n.map((function(e,t){return r.a.createElement("i",{className:o()("icon_star2"),key:t})})))))}},95:function(e,t,a){},97:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=10.9f94ca5a.chunk.js.map