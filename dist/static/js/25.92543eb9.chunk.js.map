{"version":3,"sources":["pages/reservations-detail/reservations-detail.scss","pages/reservations-detail/index.js"],"names":["module","exports","ReservationsDetail","inject","observer","props","state","isContactWayWrapperShow","reservationsDetail","imUrl","phoneNum","pageRender","serviceItemsShowLength","confirm","show","leftBtnText","rightBtnText","title","content","isLoading","isBreakDownWxProgram","this","ComNoContent","$comConntent","Header","$setTitle","Tool","setState","userId","getUserIdInfo","Common","params","orderId","Api","getReservationsDetail","then","res","returncode","result","android","that","clipboard","Clipboard","on","e","Toast","$toast","console","error","action","info","text","trigger","backUrl","encodeURIComponent","window","location","href","queryParams","successCb","reload","log","failCb","reservationsList","message","messgae","catch","addEventListener","objectId","trackCustomEvent","handleTrackCustomEvent","dealerPhone","length","dealerImUrl","require","jsBridgeV2","tel","success","fail","err","type","progressCode","orderState","Object","assign","ios","coypNode","document","querySelector","copyValLength","value","selectText","execCommand","blur","textbox","startIndex","stopIndex","createTextRange","range","collapse","moveStart","moveEnd","select","setSelectionRange","setTimeout","focus","domin","protocol","indexOf","url","dealerId","dealerName","latitude","lat","longitude","lon","address","dealerAddress","name","len","Length","onConfirmClose","getCancelOrder","orderStateDesc","className","classNames","styles","reservation_detail_container","btn_fixed_bottom","reservation_state","order_finished","order_cancel","reservation_process","onClick","viewServiceProcess","point","process_content","currentTimeLineNode","right_arrow","common_card_container","card_wrapper","card_wrapper_title","card_wrapper_content","location_container","openMapHandel","loaction_wrapper","location_icon","appointTime","serviceItems","book_item_wrapper","item_text","comboId","comboName","comboPrice","map","item","index","item_wrapper","key","itemName","show_more_btn","showMoreHandel","arrow_up","seriesName","specName","Number","travelDistance","mileage","service_wrapper","portrait_wrapper","src","dealerServerImg","alt","middle_wrapper","dealerServerName","contact_Service_btn","contactServiceHandel","order_info_wrapper","order_text_wrapper","orderTime","order_info_common_wrapper","customerName","customerPhone","order_num_wrapper","input_wrapper","copy_target","readOnly","onChange","change","copy_btn","data-clipboard-text","copyhandel","ref","contactWayClose","bind","pageSource","btn_wrapper","cancel_book_btn","cancelBookHandel","finished_btn_wrapper","orderType","view_detail_btn","onTouchStart","evaluate_btn","evaluate_btn_only","linkWriteComment","isConfirmShow","leftBtnAction","rightBtnAction","confirmTitle","confirmContent","React","Component"],"mappings":"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","file":"static/js/25.92543eb9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"reservation_detail_container\":\"reservation_detail_container__f078a37c\",\"btn_fixed_bottom\":\"btn_fixed_bottom__34b5a207\",\"reservation_state\":\"reservation_state__b39147b7\",\"order_finished\":\"order_finished__ad1e0120\",\"order_cancel\":\"order_cancel__de31b0db\",\"reservation_process\":\"reservation_process__32d9d675\",\"point\":\"point__f4006dde\",\"process_content\":\"process_content__083271d4\",\"right_arrow\":\"right_arrow__ca09f8a7\",\"common_card_container\":\"common_card_container__55fb39e1\",\"card_wrapper\":\"card_wrapper__0711a1fa\",\"location_container\":\"location_container__3cdeed58\",\"card_wrapper_title\":\"card_wrapper_title__eb62bc08\",\"card_wrapper_content\":\"card_wrapper_content__b3683f34\",\"mileage\":\"mileage__80fe664f\",\"loaction_wrapper\":\"loaction_wrapper__ea51a47d\",\"location_icon\":\"location_icon__55a00d67\",\"service_wrapper\":\"service_wrapper__c754a93f\",\"portrait_wrapper\":\"portrait_wrapper__fe2f93a5\",\"middle_wrapper\":\"middle_wrapper__4e2be1b1\",\"contact_Service_btn\":\"contact_Service_btn__b68ee7a5\",\"book_item_wrapper\":\"book_item_wrapper__2ed65fa7\",\"item_text\":\"item_text__25a27850\",\"show_more_btn\":\"show_more_btn__fc5a15a9\",\"arrow_up\":\"arrow_up__fb724bae\",\"item_wrapper\":\"item_wrapper__2ab4b201\",\"order_info_wrapper\":\"order_info_wrapper__0c9bf80c\",\"order_text_wrapper\":\"order_text_wrapper__78f38999\",\"order_info_common_wrapper\":\"order_info_common_wrapper__5b7bbe54\",\"order_num_wrapper\":\"order_num_wrapper__8b42e5d1\",\"input_wrapper\":\"input_wrapper__1c7da7a9\",\"copy_target\":\"copy_target__3b6ce43c\",\"copy_btn\":\"copy_btn__6094d174\",\"btn_wrapper\":\"btn_wrapper__3f204091\",\"view_process_btn\":\"view_process_btn__861d27bb\",\"cancel_book_btn\":\"cancel_book_btn__3cc76ddf\",\"finished_btn_wrapper\":\"finished_btn_wrapper__aeb198c4\",\"view_detail_btn\":\"view_detail_btn__387396bb\",\"evaluate_btn\":\"evaluate_btn__5bfdf28d\",\"evaluate_btn_only\":\"evaluate_btn_only__a50ce042\"};","import React from 'react';\n\nimport Api from 'api';\nimport * as Common from 'tool/common';\nimport Clipboard from 'clipboard';\nimport classNames from 'classnames';\nimport styles from \"./reservations-detail.scss\";\nimport * as Tool from 'tool';\nimport * as getUserIdInfo from 'tool/getUserId';\nimport { inject, observer } from 'mobx-react';\n\nimport Confirm from 'components/base/confirm';\nimport ContactWay from 'components/business/contact-way';\nimport Loading from 'components/base/loading-inner';\n\n@inject('Toast', 'ComNoContent', 'Header')\n@observer\nexport default class ReservationsDetail extends React.Component {\n  constructor (props){\n    super(props);\n    this.state = {\n      isContactWayWrapperShow: false,\n      reservationsDetail:  {}, // 订单详情\n      imUrl: '',\n      phoneNum: [],\n      pageRender: false,\n      serviceItemsShowLength: 5, // 套餐项展示长度\n      confirm: {\n        show: false,\n        leftBtnText: '取消',\n        rightBtnText: '确定',\n        title: '确认取消订单吗',\n        content: '',\n      },\n      isLoading: false,\n      // 是否是故障通小程序\n      isBreakDownWxProgram: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.ComNoContent.$comConntent('');\n    this.props.Header.$setTitle('订单详情');\n    Tool.setTitle('订单详情');\n\n    // 判断是否是故障通小程序\n    this.setState({\n      isBreakDownWxProgram: Tool.webApp.isBreakDownWxProgram()\n    });\n\n    this.setState({\n      isLoading: true\n    });\n    let { userId } = getUserIdInfo.getUserId();\n    Common.trackCustomPageInit({\n      'pageId': 'tmfy_order_list_pv',\n      'site_id': 1211120,\n      'category_id': 1595,\n      'sub_category_id': 18475\n    }, {\n      'userId': userId\n    });\n    // 请求详情接口\n    let params = {\n      orderId: Tool.getUrlParam('orderId') || ''\n    };\n    Api.getReservationsDetail(params).then((res) => {\n      this.setState({\n        pageRender: true,\n        isLoading: false\n      });\n      if (res.returncode === 0) {\n        this.setState({\n          reservationsDetail: res.result\n        }, () => {\n          if (Tool.checkMobileVersions().android) {\n            let that = this;\n            const clipboard = new Clipboard('.copy_btn');\n            // 复制成功的回调\n            clipboard.on('success', function(e) {\n              that.props.Toast.$toast('复制成功');\n            });\n            // 复制失败的回调\n            clipboard.on('error', function(e) {\n              console.error('Action:', e.action);\n              console.info('Text:', e.text);\n              console.error('Trigger:', e.trigger);\n            });\n          }\n        });\n      } else if (res.returncode === 501) { // 未登录\n        Common.handleLogin({\n          backUrl: encodeURIComponent(window.location.href),\n          queryParams: {},\n          successCb: () => {\n            window.location.reload();\n            console.log('登录成功的回调');\n          },\n          failCb: () => {\n            console.log('登录失败的回调');\n          }\n        });\n        this.setState({\n          reservationsList: [],\n          pageRender: false\n        });\n        this.props.ComNoContent.$comConntent(res.message);\n      } else {\n        this.props.ComNoContent.$comConntent(res.messgae || '页面溜走了，请稍候重试');\n      }\n    }).catch((error) => {\n      this.setState({\n        isLoading: false\n      });\n      this.props.ComNoContent.$comConntent(error.messgae || '页面溜走了，请稍候重试');\n    });\n    // 绑定滚动事件\n    window.addEventListener('scroll', () => {\n    }, false);\n  }\n  // methods\n\n  // 点击统计事件\n  handleTrackCustomEvent(action, objectId) {\n    let { userId } = getUserIdInfo.getUserId();\n    // eslint-disable-next-line\n    trackCustomEvent('yc_page_common_click', {\n      'bus': '1',\n      'refpage': Tool.getCookie('refpage'),\n      'channel': Tool.getCookie('channel'),\n      'city': Tool.getCookie('cityId') || 110100,\n      'action': action\n    }, {\n      'userId': userId,\n      'objectId': objectId\n    });\n  }\n\n  // 联系客服\n  contactServiceHandel() {\n    this.handleTrackCustomEvent('tmfy_order_contact_click', this.state.reservationsDetail.orderId);\n    // 故障通小程序拨打电话兼容\n    if (this.state.isBreakDownWxProgram) {\n      // 执行h5的拨打电话\n      window.location.href = `tel:${this.state.reservationsDetail.dealerPhone[0]}`;\n      return false;\n    }\n\n    if (this.state.reservationsDetail.dealerPhone && this.state.reservationsDetail.dealerPhone.length > 0 && !this.state.reservationsDetail.dealerImUrl) { // 只有电话-直接拨打电话\n      // window.location.href = `tel:${this.state.reservationsDetail.dealerPhone}`;\n      require('jsBridge');\n      window.jsBridgeV2.tel({\n        tel: this.state.reservationsDetail.dealerPhone[0],\n        success: (res) => {\n          console.log('拨打电话成功', res);\n        },\n        fail: (err) => {\n          console.log('拨打电话失败', err);\n        }\n      });\n      return;\n    }\n    if (this.state.reservationsDetail.dealerImUrl && this.state.reservationsDetail.dealerPhone && !this.state.reservationsDetail.dealerPhone.length) { // 只有IM地址-直接跳转Im地址\n      Common.pageJumpHandel(`${this.state.reservationsDetail.dealerImUrl}&pvareaid=6838753`);\n      return;\n    }\n    this.setState({\n      isContactWayWrapperShow: true\n    }, () => {\n      this.setState({\n        imUrl: `${this.state.reservationsDetail.dealerImUrl}&pvareaid=6838753`,\n        phoneNum: this.state.reservationsDetail.dealerPhone\n      });\n    });\n  }\n\n  // 关闭联系客服弹窗\n  contactWayClose() {\n    this.setState({\n      isContactWayWrapperShow: false\n    });\n  }\n\n  // 查看服务进程\n  viewServiceProcess(reservationsDetail, type) {\n    let action = type === 2 ? 'tmfy_order_progress_detail_click' : '';\n    this.handleTrackCustomEvent(action, this.state.reservationsDetail.orderId);\n    if (reservationsDetail.progressCode === 30) {\n      return;\n    }\n    if (reservationsDetail.orderState === 2 || reservationsDetail.orderState === 3) {\n      Common.pageJumpHandel('processTracking', {\n        orderId: reservationsDetail.orderId\n      });\n    }\n  }\n\n  // 取消预约\n  cancelBookHandel() {\n    this.handleTrackCustomEvent('tmfy_order_cancel_book_click', this.state.reservationsDetail.orderId);\n    this.setState({\n      confirm: Object.assign({}, this.state.confirm, {show: true})\n    });\n  }\n\n  change() {\n    console.log(1321);\n  }\n\n  // 复制\n  copyhandel() {\n    // ios复制使用js原生功能\n    if (Tool.checkMobileVersions().ios) {\n      let coypNode = document.querySelector('.copy_target');\n      let copyValLength = coypNode.value.length;\n      this.selectText(coypNode, 0, copyValLength);\n      if (document.execCommand('copy', false, null)) {\n        document.execCommand('copy', false, null); // 执行浏览器复制命令\n        this.props.Toast.$toast('复制成功');\n      } else {\n        console.log('系统不兼容，我也没办法呀~');\n        this.props.Toast.$toast('复制失败');\n      }\n      coypNode.blur();\n    }\n  }\n\n  selectText(textbox, startIndex, stopIndex) {\n    if (textbox.createTextRange) { // ie\n      let range = textbox.createTextRange();\n      range.collapse(true);\n      range.moveStart('character', startIndex); // 起始光标\n      range.moveEnd('character', stopIndex - startIndex); // 结束光标\n      range.select(); // 不兼容苹果\n    } else { // firefox/chrome\n      textbox.setSelectionRange(startIndex, stopIndex);\n      setTimeout(() => {\n        textbox.focus();\n      }, 600);\n    }\n  }\n\n  // 跳转写点评\n  linkWriteComment(reservationsDetail) {\n    this.handleTrackCustomEvent('tmfy_order_comment_click', this.state.reservationsDetail.orderId);\n    \n    let domin = window.location.protocol.indexOf('https') !== -1 ? 'yczj.m.autohome.com.cn' : 'test.yczj.m.autohome.com.cn';\n    let url = `${window.location.protocol}//${domin}/remark/commentconfirm?dealerId=${reservationsDetail.dealerId}&dealerName=${encodeURIComponent(reservationsDetail.dealerName)}&refpageName=`;\n    Common.pageJumpHandel(url);\n  }\n\n   // 打开地图\n  openMapHandel(reservationsDetail) {\n    Common.openMap({\n      latitude: reservationsDetail.lat,\n      longitude: reservationsDetail.lon,\n      address: reservationsDetail.dealerAddress,\n      name: reservationsDetail.dealerName\n    });\n  }\n\n  // 套餐项目showMore\n  showMoreHandel(len) {\n    let flag = this.state.serviceItemsShowLength === len;\n    let Length = flag ? 5 : len;\n    this.setState({\n      serviceItemsShowLength: Length\n    });\n  }\n\n  // confirm关闭弹窗\n  onConfirmClose() {\n    this.setState({\n      confirm: Object.assign({}, this.state.confirm, {show: false})\n    });\n  }\n\n  // confirm弹窗左按钮\n  leftBtnAction() {\n    this.onConfirmClose();\n  }\n\n  // confirm弹窗右按钮\n  rightBtnAction() {\n    this.setState({\n      confirm: Object.assign({}, this.state.confirm, {show: false})\n    }, () => {\n      let params = {\n        orderId: this.state.reservationsDetail.orderId\n      };\n      Api.getCancelOrder(params).then((res) => {\n        if (res.returncode === 0) {\n          this.setState({\n            reservationsDetail: Object.assign({}, this.state.reservationsDetail, {orderState: 4, orderStateDesc: '已取消'})\n          });\n        } else {\n          this.props.Toast.$toast(res.message);\n        }\n      }).catch(() => {\n        this.setState({\n          isLoading: false\n        });\n        this.props.Toast.$toast('网络异常，请稍后重试');\n      });\n    });\n  }\n\n  render() {\n    const {\n      pageRender,\n      isContactWayWrapperShow,\n      confirm,\n      reservationsDetail,\n      imUrl,\n      phoneNum,\n      isLoading,\n      isBreakDownWxProgram\n    } = this.state;\n    return (\n      pageRender && reservationsDetail && <div className={classNames(styles.reservation_detail_container, {[styles.btn_fixed_bottom]: reservationsDetail.orderState === 3 })}>\n        <div>\n          <div className={classNames(styles.reservation_state, {[styles.order_finished]: reservationsDetail.orderState === 3, [styles.order_cancel]: reservationsDetail.orderState === 4})}>{ reservationsDetail.orderStateDesc }</div>\n          {\n            (reservationsDetail.orderState === 1 || reservationsDetail.orderState === 2) && <div className={styles.reservation_process} onClick={() => this.viewServiceProcess(reservationsDetail, 1)}>\n              <p className={styles.point}></p>\n              <p className={styles.process_content}>{ reservationsDetail.currentTimeLineNode }</p>\n              { (reservationsDetail.orderState === 2 && reservationsDetail.progressCode !== 30) && <p className={styles.right_arrow}></p> }\n            </div>\n          }\n          <div className={styles.common_card_container}>\n            <div className={styles.card_wrapper}>\n              <p className={styles.card_wrapper_title}>服务门店</p>\n              <p className={styles.card_wrapper_content}>{ reservationsDetail.dealerName }</p>\n            </div>\n            { reservationsDetail.dealerAddress ? <div className={classNames(styles.card_wrapper, styles.location_container)} onClick={() => this.openMapHandel(reservationsDetail)}>\n                <p className={styles.card_wrapper_title}>详细位置</p>\n                <div className={classNames(styles.loaction_wrapper)}>\n                  <p className={styles.location_icon}></p>\n                  <p>{ reservationsDetail.dealerAddress }</p>\n                </div>\n              </div> : ''\n            }\n            <div className={styles.card_wrapper}>\n              <p className={styles.card_wrapper_title}>预约时间</p>\n              <p className={styles.card_wrapper_content}>{ reservationsDetail.appointTime }</p>\n            </div>\n          </div>\n          { reservationsDetail.serviceItems && reservationsDetail.serviceItems.length > 0 ? <div className={styles.book_item_wrapper}>\n              <div className={styles.item_text}>\n                <p>{ reservationsDetail.comboId ? reservationsDetail.comboName : '预约项目' }</p>\n                { reservationsDetail.comboId ? <p>{ `￥${reservationsDetail.comboPrice}` }</p> : '' }\n              </div>\n              {\n                reservationsDetail.serviceItems && reservationsDetail.serviceItems.length > 0 && reservationsDetail.serviceItems.map((item, index) => {\n                  return (\n                    index < this.state.serviceItemsShowLength ? <div className={styles.item_wrapper} key={index}>\n                      <p>{ item.itemName }</p>\n                    </div> : ''\n                  );\n                })\n              }\n              {\n                reservationsDetail.serviceItems && reservationsDetail.serviceItems.length > 5 && <div className={styles.show_more_btn} onClick={() => this.showMoreHandel(reservationsDetail.serviceItems.length)}>\n                  <p>{ this.state.serviceItemsShowLength === (reservationsDetail.serviceItems && reservationsDetail.serviceItems.length) ? '收起' : '展开' }</p>\n                  <p className={classNames({[styles.arrow_up] : this.state.serviceItemsShowLength === (reservationsDetail.serviceItems && reservationsDetail.serviceItems.length) })}></p>\n                </div>\n              }\n            </div> : ''\n          }\n          <div className={styles.common_card_container}>\n            <div className={styles.card_wrapper}>\n              <p className={styles.card_wrapper_title}>{ reservationsDetail.seriesName }</p>\n              <p className={styles.card_wrapper_content}>{ reservationsDetail.specName }</p>\n            </div>\n            { Number(reservationsDetail.travelDistance) ? <div className={styles.card_wrapper}>\n              <p className={styles.card_wrapper_title}>当前里程</p>\n              <p className={styles.card_wrapper_content}><span className={styles.mileage}>{ reservationsDetail.travelDistance }</span><span>km</span></p>\n            </div> : ''\n            }\n          </div>\n          {\n            (reservationsDetail.dealerImUrl || reservationsDetail.dealerPhone) ? <div className={styles.service_wrapper}>\n            <div className={styles.portrait_wrapper}>\n              <img src={ reservationsDetail.dealerServerImg || 'https://x.autoimg.cn/cfw/yc/images/autoapp-user-icon.png' } alt=\"\"/>\n            </div>\n            {\n              (reservationsDetail.dealerImUrl) ? <div className={styles.middle_wrapper}>\n                <p>\n                  <span>门店客服：</span>\n                  <span>{ reservationsDetail.dealerServerName }</span>\n                </p>\n              </div> : ''\n            }\n            {\n              (reservationsDetail.dealerPhone && !reservationsDetail.dealerImUrl) ? <div className={styles.middle_wrapper}>\n                <p>\n                  <span>门店电话</span>\n                </p>\n              </div> : ''\n            }\n            <div className={styles.contact_Service_btn} onClick={() => this.contactServiceHandel()}>\n              { reservationsDetail.dealerImUrl && !isBreakDownWxProgram ? '联系客服' : '拨打电话' }\n            </div>\n          </div> : ''\n          }\n          <div className={styles.order_info_wrapper}>\n            <div className={styles.order_text_wrapper}>\n              <p>订单信息</p>\n              <p>\n                <span>下单日期：</span>\n                <span>{ reservationsDetail.orderTime }</span>\n              </p>\n            </div>\n            <div className={styles.order_info_common_wrapper}>\n              <p>预约人</p>\n              <p>{ reservationsDetail.customerName }</p>\n            </div>\n            <div className={styles.order_info_common_wrapper}>\n              <p>联系电话</p>\n              <p>{ reservationsDetail.customerPhone }</p>\n            </div>\n            <div className={styles.order_info_common_wrapper}>\n              <p>订单编号</p>\n              <div className={styles.order_num_wrapper}>\n                <div className={styles.input_wrapper}>\n                  <input className={classNames('copy_target', styles.copy_target)} type='text' value={ reservationsDetail.orderId || ''} readOnly onChange={() => this.change()}></input>\n                </div>\n                <p className={classNames('copy_btn', styles.copy_btn)} data-clipboard-text={reservationsDetail.orderId} onClick={() => this.copyhandel()}>复制</p>\n              </div>\n            </div>\n          </div>\n          <ContactWay\n            ref='contactWayWrapper'\n            isContactWayWrapperShow={isContactWayWrapperShow}\n            imUrl={imUrl}\n            phoneNum={Number(phoneNum[0])}\n            contactWayClose={this.contactWayClose.bind(this)}\n            pageSource='reservationDetail'\n            orderId={reservationsDetail.orderId}\n          />\n        </div>\n        {\n          (reservationsDetail.orderState === 1 || reservationsDetail.orderState === 3) && <div className={classNames(styles.btn_wrapper, {[styles.btn_fixed_bottom]: reservationsDetail.orderState !== 1 })}>\n            {\n              do {\n                switch(reservationsDetail.orderState) {\n                  case 1:\n                    return (<div className={styles.cancel_book_btn} onClick={() => this.cancelBookHandel()}>取消预约</div>);\n                  case 3:\n                    return (\n                      <div className={styles.finished_btn_wrapper}>\n                        { reservationsDetail.orderType && reservationsDetail.orderType === 3 && <div className={styles.view_detail_btn} onTouchStart={() => this.viewServiceProcess(reservationsDetail, 2)}>进程详情</div> }\n                        <div className={classNames(styles.evaluate_btn, {[styles.evaluate_btn_only]: (reservationsDetail.orderType && reservationsDetail.orderType !== 3)})} onTouchStart={() => this.linkWriteComment(reservationsDetail)}>发表点评</div>\n                      </div>\n                    );\n                }\n              }\n            }\n          </div>\n        }\n        <Confirm\n          isConfirmShow={confirm.show}\n          leftBtnText={confirm.leftBtnText}\n          rightBtnText={confirm.rightBtnText}\n          leftBtnAction={this.leftBtnAction.bind(this)}\n          rightBtnAction={this.rightBtnAction.bind(this)}\n          onConfirmClose={this.onConfirmClose.bind(this)}\n          confirmTitle={confirm.title}\n          confirmContent={confirm.content}\n        />\n        <Loading show={ isLoading } />\n      </div>\n    );\n  }\n}"],"sourceRoot":""}