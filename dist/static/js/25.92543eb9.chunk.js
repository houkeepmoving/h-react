(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{128:function(e,t,a){e.exports={reservation_detail_container:"reservation_detail_container__f078a37c",btn_fixed_bottom:"btn_fixed_bottom__34b5a207",reservation_state:"reservation_state__b39147b7",order_finished:"order_finished__ad1e0120",order_cancel:"order_cancel__de31b0db",reservation_process:"reservation_process__32d9d675",point:"point__f4006dde",process_content:"process_content__083271d4",right_arrow:"right_arrow__ca09f8a7",common_card_container:"common_card_container__55fb39e1",card_wrapper:"card_wrapper__0711a1fa",location_container:"location_container__3cdeed58",card_wrapper_title:"card_wrapper_title__eb62bc08",card_wrapper_content:"card_wrapper_content__b3683f34",mileage:"mileage__80fe664f",loaction_wrapper:"loaction_wrapper__ea51a47d",location_icon:"location_icon__55a00d67",service_wrapper:"service_wrapper__c754a93f",portrait_wrapper:"portrait_wrapper__fe2f93a5",middle_wrapper:"middle_wrapper__4e2be1b1",contact_Service_btn:"contact_Service_btn__b68ee7a5",book_item_wrapper:"book_item_wrapper__2ed65fa7",item_text:"item_text__25a27850",show_more_btn:"show_more_btn__fc5a15a9",arrow_up:"arrow_up__fb724bae",item_wrapper:"item_wrapper__2ab4b201",order_info_wrapper:"order_info_wrapper__0c9bf80c",order_text_wrapper:"order_text_wrapper__78f38999",order_info_common_wrapper:"order_info_common_wrapper__5b7bbe54",order_num_wrapper:"order_num_wrapper__8b42e5d1",input_wrapper:"input_wrapper__1c7da7a9",copy_target:"copy_target__3b6ce43c",copy_btn:"copy_btn__6094d174",btn_wrapper:"btn_wrapper__3f204091",view_process_btn:"view_process_btn__861d27bb",cancel_book_btn:"cancel_book_btn__3cc76ddf",finished_btn_wrapper:"finished_btn_wrapper__aeb198c4",view_detail_btn:"view_detail_btn__387396bb",evaluate_btn:"evaluate_btn__5bfdf28d",evaluate_btn_only:"evaluate_btn_only__a50ce042"}},192:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var r,n=a(83),o=a(5),c=a(6),s=a(21),i=a(20),l=a(22),m=a(0),d=a.n(m),_=a(16),p=a(84),u=a(127),v=a.n(u),h=a(33),f=a.n(h),w=a(128),b=a.n(w),g=a(12),E=a(85),N=a(34),y=a(99),S=a(89),C=a(86),k=Object(N.b)("Toast","ComNoContent","Header")(r=Object(N.c)(r=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={isContactWayWrapperShow:!1,reservationsDetail:{},imUrl:"",phoneNum:[],pageRender:!1,serviceItemsShowLength:5,confirm:{show:!1,leftBtnText:"\u53d6\u6d88",rightBtnText:"\u786e\u5b9a",title:"\u786e\u8ba4\u53d6\u6d88\u8ba2\u5355\u5417",content:""},isLoading:!1,isBreakDownWxProgram:!1},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.ComNoContent.$comConntent(""),this.props.Header.$setTitle("\u8ba2\u5355\u8be6\u60c5"),g.n("\u8ba2\u5355\u8be6\u60c5"),this.setState({isBreakDownWxProgram:g.o.isBreakDownWxProgram()}),this.setState({isLoading:!0});var t=E.a().userId;p.i({pageId:"tmfy_order_list_pv",site_id:1211120,category_id:1595,sub_category_id:18475},{userId:t});var a={orderId:g.g("orderId")||""};_.a.getReservationsDetail(a).then((function(t){e.setState({pageRender:!0,isLoading:!1}),0===t.returncode?e.setState({reservationsDetail:t.result},(function(){if(g.b().android){var t=e,a=new v.a(".copy_btn");a.on("success",(function(e){t.props.Toast.$toast("\u590d\u5236\u6210\u529f")})),a.on("error",(function(e){console.error("Action:",e.action),console.info("Text:",e.text),console.error("Trigger:",e.trigger)}))}})):501===t.returncode?(p.d({backUrl:encodeURIComponent(window.location.href),queryParams:{},successCb:function(){window.location.reload(),console.log("\u767b\u5f55\u6210\u529f\u7684\u56de\u8c03")},failCb:function(){console.log("\u767b\u5f55\u5931\u8d25\u7684\u56de\u8c03")}}),e.setState({reservationsList:[],pageRender:!1}),e.props.ComNoContent.$comConntent(t.message)):e.props.ComNoContent.$comConntent(t.messgae||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")})).catch((function(t){e.setState({isLoading:!1}),e.props.ComNoContent.$comConntent(t.messgae||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")})),window.addEventListener("scroll",(function(){}),!1)}},{key:"handleTrackCustomEvent",value:function(e,t){var a=E.a().userId;trackCustomEvent("yc_page_common_click",{bus:"1",refpage:g.d("refpage"),channel:g.d("channel"),city:g.d("cityId")||110100,action:e},{userId:a,objectId:t})}},{key:"contactServiceHandel",value:function(){var e=this;return this.handleTrackCustomEvent("tmfy_order_contact_click",this.state.reservationsDetail.orderId),this.state.isBreakDownWxProgram?(window.location.href="tel:".concat(this.state.reservationsDetail.dealerPhone[0]),!1):this.state.reservationsDetail.dealerPhone&&this.state.reservationsDetail.dealerPhone.length>0&&!this.state.reservationsDetail.dealerImUrl?(a(25),void window.jsBridgeV2.tel({tel:this.state.reservationsDetail.dealerPhone[0],success:function(e){console.log("\u62e8\u6253\u7535\u8bdd\u6210\u529f",e)},fail:function(e){console.log("\u62e8\u6253\u7535\u8bdd\u5931\u8d25",e)}})):void(this.state.reservationsDetail.dealerImUrl&&this.state.reservationsDetail.dealerPhone&&!this.state.reservationsDetail.dealerPhone.length?p.f("".concat(this.state.reservationsDetail.dealerImUrl,"&pvareaid=6838753")):this.setState({isContactWayWrapperShow:!0},(function(){e.setState({imUrl:"".concat(e.state.reservationsDetail.dealerImUrl,"&pvareaid=6838753"),phoneNum:e.state.reservationsDetail.dealerPhone})})))}},{key:"contactWayClose",value:function(){this.setState({isContactWayWrapperShow:!1})}},{key:"viewServiceProcess",value:function(e,t){var a=2===t?"tmfy_order_progress_detail_click":"";this.handleTrackCustomEvent(a,this.state.reservationsDetail.orderId),30!==e.progressCode&&(2!==e.orderState&&3!==e.orderState||p.f("processTracking",{orderId:e.orderId}))}},{key:"cancelBookHandel",value:function(){this.handleTrackCustomEvent("tmfy_order_cancel_book_click",this.state.reservationsDetail.orderId),this.setState({confirm:Object.assign({},this.state.confirm,{show:!0})})}},{key:"change",value:function(){console.log(1321)}},{key:"copyhandel",value:function(){if(g.b().ios){var e=document.querySelector(".copy_target"),t=e.value.length;this.selectText(e,0,t),document.execCommand("copy",!1,null)?(document.execCommand("copy",!1,null),this.props.Toast.$toast("\u590d\u5236\u6210\u529f")):(console.log("\u7cfb\u7edf\u4e0d\u517c\u5bb9\uff0c\u6211\u4e5f\u6ca1\u529e\u6cd5\u5440~"),this.props.Toast.$toast("\u590d\u5236\u5931\u8d25")),e.blur()}}},{key:"selectText",value:function(e,t,a){if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",a-t),r.select()}else e.setSelectionRange(t,a),setTimeout((function(){e.focus()}),600)}},{key:"linkWriteComment",value:function(e){this.handleTrackCustomEvent("tmfy_order_comment_click",this.state.reservationsDetail.orderId);var t=-1!==window.location.protocol.indexOf("https")?"yczj.m.autohome.com.cn":"test.yczj.m.autohome.com.cn",a="".concat(window.location.protocol,"//").concat(t,"/remark/commentconfirm?dealerId=").concat(e.dealerId,"&dealerName=").concat(encodeURIComponent(e.dealerName),"&refpageName=");p.f(a)}},{key:"openMapHandel",value:function(e){p.e({latitude:e.lat,longitude:e.lon,address:e.dealerAddress,name:e.dealerName})}},{key:"showMoreHandel",value:function(e){var t=this.state.serviceItemsShowLength===e?5:e;this.setState({serviceItemsShowLength:t})}},{key:"onConfirmClose",value:function(){this.setState({confirm:Object.assign({},this.state.confirm,{show:!1})})}},{key:"leftBtnAction",value:function(){this.onConfirmClose()}},{key:"rightBtnAction",value:function(){var e=this;this.setState({confirm:Object.assign({},this.state.confirm,{show:!1})},(function(){var t={orderId:e.state.reservationsDetail.orderId};_.a.getCancelOrder(t).then((function(t){0===t.returncode?e.setState({reservationsDetail:Object.assign({},e.state.reservationsDetail,{orderState:4,orderStateDesc:"\u5df2\u53d6\u6d88"})}):e.props.Toast.$toast(t.message)})).catch((function(){e.setState({isLoading:!1}),e.props.Toast.$toast("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}))}))}},{key:"render",value:function(){var e,t=this,a=this.state,r=a.pageRender,o=a.isContactWayWrapperShow,c=a.confirm,s=a.reservationsDetail,i=a.imUrl,l=a.phoneNum,m=a.isLoading,_=a.isBreakDownWxProgram;return r&&s&&d.a.createElement("div",{className:f()(b.a.reservation_detail_container,Object(n.a)({},b.a.btn_fixed_bottom,3===s.orderState))},d.a.createElement("div",null,d.a.createElement("div",{className:f()(b.a.reservation_state,(e={},Object(n.a)(e,b.a.order_finished,3===s.orderState),Object(n.a)(e,b.a.order_cancel,4===s.orderState),e))},s.orderStateDesc),(1===s.orderState||2===s.orderState)&&d.a.createElement("div",{className:b.a.reservation_process,onClick:function(){return t.viewServiceProcess(s,1)}},d.a.createElement("p",{className:b.a.point}),d.a.createElement("p",{className:b.a.process_content},s.currentTimeLineNode),2===s.orderState&&30!==s.progressCode&&d.a.createElement("p",{className:b.a.right_arrow})),d.a.createElement("div",{className:b.a.common_card_container},d.a.createElement("div",{className:b.a.card_wrapper},d.a.createElement("p",{className:b.a.card_wrapper_title},"\u670d\u52a1\u95e8\u5e97"),d.a.createElement("p",{className:b.a.card_wrapper_content},s.dealerName)),s.dealerAddress?d.a.createElement("div",{className:f()(b.a.card_wrapper,b.a.location_container),onClick:function(){return t.openMapHandel(s)}},d.a.createElement("p",{className:b.a.card_wrapper_title},"\u8be6\u7ec6\u4f4d\u7f6e"),d.a.createElement("div",{className:f()(b.a.loaction_wrapper)},d.a.createElement("p",{className:b.a.location_icon}),d.a.createElement("p",null,s.dealerAddress))):"",d.a.createElement("div",{className:b.a.card_wrapper},d.a.createElement("p",{className:b.a.card_wrapper_title},"\u9884\u7ea6\u65f6\u95f4"),d.a.createElement("p",{className:b.a.card_wrapper_content},s.appointTime))),s.serviceItems&&s.serviceItems.length>0?d.a.createElement("div",{className:b.a.book_item_wrapper},d.a.createElement("div",{className:b.a.item_text},d.a.createElement("p",null,s.comboId?s.comboName:"\u9884\u7ea6\u9879\u76ee"),s.comboId?d.a.createElement("p",null,"\uffe5".concat(s.comboPrice)):""),s.serviceItems&&s.serviceItems.length>0&&s.serviceItems.map((function(e,a){return a<t.state.serviceItemsShowLength?d.a.createElement("div",{className:b.a.item_wrapper,key:a},d.a.createElement("p",null,e.itemName)):""})),s.serviceItems&&s.serviceItems.length>5&&d.a.createElement("div",{className:b.a.show_more_btn,onClick:function(){return t.showMoreHandel(s.serviceItems.length)}},d.a.createElement("p",null,this.state.serviceItemsShowLength===(s.serviceItems&&s.serviceItems.length)?"\u6536\u8d77":"\u5c55\u5f00"),d.a.createElement("p",{className:f()(Object(n.a)({},b.a.arrow_up,this.state.serviceItemsShowLength===(s.serviceItems&&s.serviceItems.length)))}))):"",d.a.createElement("div",{className:b.a.common_card_container},d.a.createElement("div",{className:b.a.card_wrapper},d.a.createElement("p",{className:b.a.card_wrapper_title},s.seriesName),d.a.createElement("p",{className:b.a.card_wrapper_content},s.specName)),Number(s.travelDistance)?d.a.createElement("div",{className:b.a.card_wrapper},d.a.createElement("p",{className:b.a.card_wrapper_title},"\u5f53\u524d\u91cc\u7a0b"),d.a.createElement("p",{className:b.a.card_wrapper_content},d.a.createElement("span",{className:b.a.mileage},s.travelDistance),d.a.createElement("span",null,"km"))):""),s.dealerImUrl||s.dealerPhone?d.a.createElement("div",{className:b.a.service_wrapper},d.a.createElement("div",{className:b.a.portrait_wrapper},d.a.createElement("img",{src:s.dealerServerImg||"https://x.autoimg.cn/cfw/yc/images/autoapp-user-icon.png",alt:""})),s.dealerImUrl?d.a.createElement("div",{className:b.a.middle_wrapper},d.a.createElement("p",null,d.a.createElement("span",null,"\u95e8\u5e97\u5ba2\u670d\uff1a"),d.a.createElement("span",null,s.dealerServerName))):"",s.dealerPhone&&!s.dealerImUrl?d.a.createElement("div",{className:b.a.middle_wrapper},d.a.createElement("p",null,d.a.createElement("span",null,"\u95e8\u5e97\u7535\u8bdd"))):"",d.a.createElement("div",{className:b.a.contact_Service_btn,onClick:function(){return t.contactServiceHandel()}},s.dealerImUrl&&!_?"\u8054\u7cfb\u5ba2\u670d":"\u62e8\u6253\u7535\u8bdd")):"",d.a.createElement("div",{className:b.a.order_info_wrapper},d.a.createElement("div",{className:b.a.order_text_wrapper},d.a.createElement("p",null,"\u8ba2\u5355\u4fe1\u606f"),d.a.createElement("p",null,d.a.createElement("span",null,"\u4e0b\u5355\u65e5\u671f\uff1a"),d.a.createElement("span",null,s.orderTime))),d.a.createElement("div",{className:b.a.order_info_common_wrapper},d.a.createElement("p",null,"\u9884\u7ea6\u4eba"),d.a.createElement("p",null,s.customerName)),d.a.createElement("div",{className:b.a.order_info_common_wrapper},d.a.createElement("p",null,"\u8054\u7cfb\u7535\u8bdd"),d.a.createElement("p",null,s.customerPhone)),d.a.createElement("div",{className:b.a.order_info_common_wrapper},d.a.createElement("p",null,"\u8ba2\u5355\u7f16\u53f7"),d.a.createElement("div",{className:b.a.order_num_wrapper},d.a.createElement("div",{className:b.a.input_wrapper},d.a.createElement("input",{className:f()("copy_target",b.a.copy_target),type:"text",value:s.orderId||"",readOnly:!0,onChange:function(){return t.change()}})),d.a.createElement("p",{className:f()("copy_btn",b.a.copy_btn),"data-clipboard-text":s.orderId,onClick:function(){return t.copyhandel()}},"\u590d\u5236")))),d.a.createElement(S.a,{ref:"contactWayWrapper",isContactWayWrapperShow:o,imUrl:i,phoneNum:Number(l[0]),contactWayClose:this.contactWayClose.bind(this),pageSource:"reservationDetail",orderId:s.orderId})),(1===s.orderState||3===s.orderState)&&d.a.createElement("div",{className:f()(b.a.btn_wrapper,Object(n.a)({},b.a.btn_fixed_bottom,1!==s.orderState))},function(){switch(s.orderState){case 1:return d.a.createElement("div",{className:b.a.cancel_book_btn,onClick:function(){return t.cancelBookHandel()}},"\u53d6\u6d88\u9884\u7ea6");case 3:return d.a.createElement("div",{className:b.a.finished_btn_wrapper},s.orderType&&3===s.orderType&&d.a.createElement("div",{className:b.a.view_detail_btn,onTouchStart:function(){return t.viewServiceProcess(s,2)}},"\u8fdb\u7a0b\u8be6\u60c5"),d.a.createElement("div",{className:f()(b.a.evaluate_btn,Object(n.a)({},b.a.evaluate_btn_only,s.orderType&&3!==s.orderType)),onTouchStart:function(){return t.linkWriteComment(s)}},"\u53d1\u8868\u70b9\u8bc4"))}}()),d.a.createElement(y.a,{isConfirmShow:c.show,leftBtnText:c.leftBtnText,rightBtnText:c.rightBtnText,leftBtnAction:this.leftBtnAction.bind(this),rightBtnAction:this.rightBtnAction.bind(this),onConfirmClose:this.onConfirmClose.bind(this),confirmTitle:c.title,confirmContent:c.content}),d.a.createElement(C.a,{show:m}))}}]),t}(d.a.Component))||r)||r}}]);
//# sourceMappingURL=25.92543eb9.chunk.js.map