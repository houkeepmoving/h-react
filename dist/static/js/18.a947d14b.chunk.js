(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{113:function(e,t,n){"use strict";var a=n(14),r=n(11),s=(n(15),n(0)),o=n.n(s),i=n(18),c=n.n(i),l=!1,d=o.a.createContext(null),u="unmounted",p="exited",m="entering",h="entered",_=function(e){function t(t,n){var a;a=e.call(this,t,n)||this;var r,s=n&&!n.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?s?(r=p,a.appearStatus=m):r=h:r=t.unmountOnExit||t.mountOnEnter?u:p,a.state={status:r},a.nextCallback=null,a}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:p}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==m&&n!==h&&(t=m):n!==m&&n!==h||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!==typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=c.a.findDOMNode(this);t===m?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===p&&this.setState({status:u})},n.performEnter=function(e,t){var n=this,a=this.props.enter,r=this.context?this.context.isMounting:t,s=this.getTimeouts(),o=r?s.appear:s.enter;!t&&!a||l?this.safeSetState({status:h},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,r),this.safeSetState({status:m},(function(){n.props.onEntering(e,r),n.onTransitionEnd(e,o,(function(){n.safeSetState({status:h},(function(){n.props.onEntered(e,r)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,a=this.getTimeouts();n&&!l?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,a.exit,(function(){t.safeSetState({status:p},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:p},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var a=null==t&&!this.props.addEndListener;e&&!a?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,r=Object(a.a)(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return o.a.createElement(d.Provider,{value:null},n(e,r));var s=o.a.Children.only(n);return o.a.createElement(d.Provider,{value:null},o.a.cloneElement(s,r))},t}(o.a.Component);function f(){}_.contextType=d,_.propTypes={},_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:f,onEntering:f,onEntered:f,onExit:f,onExiting:f,onExited:f},_.UNMOUNTED=0,_.EXITED=1,_.ENTERING=2,_.ENTERED=3,_.EXITING=4;t.a=_},115:function(e,t,n){e.exports={my_reservation_container:"my_reservation_container__ca70f9fc",reservation_list_wrapper:"reservation_list_wrapper__af37000a",list_bd:"list_bd__2d315484",dealer_img_wrapper:"dealer_img_wrapper__4404712d",tab_wrapper:"tab_wrapper__88162aa6",active:"active__0e300822",list_hd:"list_hd__b2f41323",dealer_type_lavel:"dealer_type_lavel__158c9152",dealer_name:"dealer_name__f09b1c2f",arrow_icon:"arrow_icon__c5469327",reservation_state:"reservation_state__9c3852f9",finished_state:"finished_state__1ba4e8a2",cancel_state:"cancel_state__9ebd4788",blue_label:"blue_label__517fa774",transparency_label:"transparency_label__07795edc",list_bd_right:"list_bd_right__c9472a23",appointment_time:"appointment_time__ec333ec2",btn_wrapper:"btn_wrapper__c95126cb",process_btn:"process_btn__83659812",service_btn:"service_btn__ae0a22ca",list_ft:"list_ft__20a4be5d",green_point:"green_point__c7c9b878",context:"context__c563cfcd"}},191:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a,r=n(83),s=n(5),o=n(6),i=n(21),c=n(20),l=n(22),d=n(0),u=n.n(d),p=n(16),m=n(33),h=n.n(m),_=n(115),f=n.n(_),g=n(12),v=n(34),b=n(90),C=n(86),E=n(91),S=n(89),x=n(93),k=n.n(x),N=n(99),T=n(84),y=n(85),w=Object(v.b)("Toast","ComNoContent","Header")(a=Object(v.c)(a=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={goTop:!1,isContactWayWrapperShow:!1,currentTab:0,reservationsList:[],pageIndex:1,getMoreFlag:!0,imUrl:"",phoneNum:[],isLoadMoreShow:!0,loderMoreText:"\u52a0\u8f7d\u4e2d...",pageRender:!1,currentItem:{},currentIndex:0,confirm:{show:!1,leftBtnText:"\u53d6\u6d88",rightBtnText:"\u786e\u5b9a",title:"\u786e\u8ba4\u53d6\u6d88\u8ba2\u5355\u5417",content:""},isLoading:!1,fromTabChange:!1},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.ComNoContent.$comConntent(""),this.props.Header.$setTitle("\u6211\u7684\u9884\u7ea6\u5355"),g.n("\u6211\u7684\u9884\u7ea6\u5355"),this.setState({isLoading:!0});var t=y.a().userId;T.i({site_id:1211120,category_id:1595,sub_category_id:18474},{userId:t}),this.getReservationsListHandel(),window.addEventListener("scroll",(function(){e.setState({goTop:document.documentElement.scrollTop>400||document.body.scrollTop>400}),g.f()<=g.i()+g.e()+30&&e.state.getMoreFlag&&!e.state.fromTabChange&&e.getReservationsMoreList()}),!1)}},{key:"handleTrackCustomEvent",value:function(e,t){var n=y.a().userId;trackCustomEvent("yc_page_common_click",{bus:"1",refpage:g.d("refpage"),channel:g.d("channel"),city:g.d("cityId")||110100,action:e},{userId:n,objectId:t})}},{key:"getReservationsListHandel",value:function(){var e=this;this.setState({isLoadMoreShow:!1}),this.props.ComNoContent.$comConntent("");var t={pageIndex:this.state.pageIndex,pageSize:15,type:this.state.currentTab};p.a.getReservationsList(t).then((function(t){if(e.setState({pageRender:!0,isLoading:!1}),0===t.returncode)if(e.setState({isLoadMoreShow:!1}),t.result&&t.result.list&&t.result.list.length){var n=t.result.list;n.length<15&&e.setState({isLoadMoreShow:!0,loderMoreText:"\u52a0\u8f7d\u5b8c\u6210",getMoreFlag:!1}),e.setState({reservationsList:n})}else t.result&&t.result.list&&!t.result.list.length&&(e.setState({getMoreFlag:!1,isLoadMoreShow:!1}),e.props.ComNoContent.$comConntent("\u6682\u65e0\u6570\u636e"));else 501===t.returncode?(T.d({backUrl:encodeURIComponent(window.location.href),queryParams:{},successCb:function(){window.location.reload()},failCb:function(){}}),e.setState({reservationsList:[],pageRender:!1}),e.props.ComNoContent.$comConntent(t.message)):(e.setState({reservationsList:[],pageRender:!1}),e.props.ComNoContent.$comConntent(t.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5"))})).catch((function(){e.setState({reservationsList:[],pageRender:!1,isLoading:!1}),e.props.ComNoContent.$comConntent("\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}))}},{key:"getReservationsMoreList",value:function(){var e=this;this.props.ComNoContent.$comConntent(""),this.setState({isLoadMoreShow:!0,loderMoreText:"\u52a0\u8f7d\u4e2d..."}),this.setState({pageIndex:this.state.pageIndex+1},(function(){var t={pageIndex:e.state.pageIndex,pageSize:15,type:e.state.currentTab};p.a.getReservationsList(t).then((function(t){if(0===t.returncode)if(t.result&&t.result.list&&t.result.list.length){var n=t.result.list;e.setState({reservationsList:e.state.reservationsList.concat(n)})}else t.result&&t.result.list&&!t.result.list.length&&e.setState({getMoreFlag:!1,isLoadMoreShow:!0,loderMoreText:"\u52a0\u8f7d\u5b8c\u6210"});else e.setState({reservationsList:[],getMoreFlag:!1}),e.props.ComNoContent.$comConntent(t.messgae||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")})).catch((function(){e.setState({reservationsList:[],getMoreFlag:!1,isLoading:!1}),e.props.ComNoContent.$comConntent("\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u5019\u91cd\u8bd5")}))}))}},{key:"linkOrderDetail",value:function(e,t,n){var a=1===n?"tmfy_order_list_order_item_click":"tmfy_order_list_detail_click";this.handleTrackCustomEvent(a,t.orderId),e.stopPropagation(),T.f("reservationsDetail",{orderId:t.orderId})}},{key:"processBtnHandel",value:function(e,t,n){var a=1===n?"tmfy_order_list_new_status_click":"tmfy_order_list_progress_click";this.handleTrackCustomEvent(a,t.orderId),30!==t.progressCode&&(e.stopPropagation(),T.f("processTracking",{orderId:t.orderId}))}},{key:"cancelReservationHandel",value:function(e,t,n){e.stopPropagation(),this.handleTrackCustomEvent("tmfy_order_list_cancel_click",t.orderId),this.setState({confirm:Object.assign({},this.state.confirm,{show:!0}),currentItem:t,currentIndex:n})}},{key:"onConfirmClose",value:function(){this.setState({confirm:Object.assign({},this.state.confirm,{show:!1})})}},{key:"leftBtnAction",value:function(){this.onConfirmClose()}},{key:"rightBtnAction",value:function(){var e=this;this.setState({confirm:Object.assign({},this.state.confirm,{show:!1})},(function(){var t={orderId:e.state.currentItem.orderId};p.a.getCancelOrder(t).then((function(t){0===t.returncode?(e.state.reservationsList[e.state.currentIndex]=Object.assign({},e.state.reservationsList[e.state.currentIndex],{orderState:4,orderStateDesc:"\u5df2\u53d6\u6d88"}),e.setState({reservationsList:e.state.reservationsList})):e.props.Toast.$toast(t.message)})).catch((function(t){e.setState({isLoading:!1}),e.props.Toast.$toast(t.message||"\u9875\u9762\u6e9c\u8d70\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))}))}},{key:"tabChangeHandel",value:function(e,t){var n=this;e.target.classList[0]&&-1!==e.target.classList[0].indexOf("active")||(this.setState({getMoreFlag:!0,currentTab:t,pageIndex:1,reservationsList:[],isLoading:!0,fromTabChange:!0},(function(){n.getReservationsListHandel(),n.handleTrackCustomEvent("tmfy_order_list_status_tab_click",t)})),setTimeout((function(){n.setState({fromTabChange:!1})}),60))}},{key:"contactServiceHandel",value:function(e,t){var a=this;if(this.handleTrackCustomEvent("tmfy_order_list_contact_im_click",t.orderId),e.stopPropagation(),t.dealerPhone&&t.dealerPhone.length&&!t.imUrl)return n(25),void window.jsBridgeV2.tel({tel:JSON.stringify(t.dealerPhone[0]),success:function(e){console.log("\u62e8\u6253\u7535\u8bdd\u6210\u529f",e)},fail:function(e){console.log("\u62e8\u6253\u7535\u8bdd\u5931\u8d25",e)}});t.imUrl&&t.dealerPhone&&!t.dealerPhone.length?T.f("".concat(t.imUrl,"&pvareaid=6838752")):this.setState({isContactWayWrapperShow:!0},(function(){a.setState({imUrl:"".concat(t.imUrl,"&pvareaid=6838752"),phoneNum:t.dealerPhone})}))}},{key:"contactWayClose",value:function(){this.setState({isContactWayWrapperShow:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.pageRender,a=t.goTop,s=t.currentTab,o=t.confirm,i=t.isContactWayWrapperShow,c=t.reservationsList,l=t.imUrl,d=t.phoneNum,p=t.isLoading;return n?u.a.createElement("div",{className:f.a.my_reservation_container},u.a.createElement("ul",{className:f.a.tab_wrapper},u.a.createElement("li",{onClick:function(t){return e.tabChangeHandel(t,0)},className:h()(Object(r.a)({},f.a.active,0===s))},"\u5168\u90e8"),u.a.createElement("li",{onClick:function(t){return e.tabChangeHandel(t,1)},className:h()(Object(r.a)({},f.a.active,1===s))},"\u5f85\u670d\u52a1"),u.a.createElement("li",{onClick:function(t){return e.tabChangeHandel(t,2)},className:h()(Object(r.a)({},f.a.active,2===s))},"\u670d\u52a1\u4e2d"),u.a.createElement("li",{onClick:function(t){return e.tabChangeHandel(t,3)},className:h()(Object(r.a)({},f.a.active,3===s))},"\u5df2\u5b8c\u6210"),u.a.createElement("li",{onClick:function(t){return e.tabChangeHandel(t,4)},className:h()(Object(r.a)({},f.a.active,4===s))},"\u5df2\u53d6\u6d88")),u.a.createElement("ul",{className:f.a.reservation_list_wrapper},c&&c.length>0&&c.map((function(t,n){var a;return u.a.createElement("li",{key:t.orderId||n,onClick:function(n){return e.linkOrderDetail(n,t,1)}},u.a.createElement("div",{className:f.a.list_hd},!t.dealerType&&u.a.createElement("p",{className:f.a.dealer_type_lavel},"4S\u5e97"),u.a.createElement("p",{className:f.a.dealer_name},t.dealerName),u.a.createElement("p",{className:h()(f.a.reservation_state,(a={},Object(r.a)(a,f.a.finished_state,3===t.orderState),Object(r.a)(a,f.a.cancel_state,4===t.orderState),a))},t.orderStateDesc)),u.a.createElement("div",{className:f.a.list_bd},u.a.createElement("div",{className:f.a.dealer_img_wrapper},u.a.createElement(k.a,{width:110,height:84},u.a.createElement("img",{src:t.dealerImg,alt:""})),t.transparentScore?u.a.createElement("span",{className:f.a.blue_label}):"",t.transparentScore?u.a.createElement("span",{className:f.a.transparency_label},"\u900f\u660e\u5ea6".concat(t.transparentScore)):""),u.a.createElement("div",{className:f.a.list_bd_right},u.a.createElement("div",{className:f.a.appointment_time},u.a.createElement("p",null,"\u9884\u7ea6\u5230\u5e97\u65f6\u95f4:"),u.a.createElement("p",null,t.appointTime)),u.a.createElement("div",{className:f.a.btn_wrapper},1===t.orderState&&u.a.createElement("p",{className:f.a.process_btn,onClick:function(a){return e.cancelReservationHandel(a,t,n)}},"\u53d6\u6d88\u9884\u7ea6"),2===t.orderState&&30!==t.progressCode&&u.a.createElement("p",{className:f.a.process_btn,onClick:function(n){return e.processBtnHandel(n,t,1)}},"\u67e5\u770b\u8fdb\u7a0b"),4!==t.orderState&&3!==t.orderState&&(t.imUrl||t.dealerPhone&&t.dealerPhone.length)&&u.a.createElement("p",{className:f.a.service_btn,onClick:function(n){return e.contactServiceHandel(n,t)}},t.imUrl?"\u8054\u7cfb\u5ba2\u670d":"\u62e8\u6253\u7535\u8bdd"),(4===t.orderState||3===t.orderState)&&u.a.createElement("p",{className:f.a.service_btn,onClick:function(n){return e.linkOrderDetail(n,t,2)}},"\u67e5\u770b\u8be6\u60c5")))),t.currentTimeLineNode&&2===t.orderState&&u.a.createElement("div",{className:f.a.list_ft,onClick:function(n){return e.processBtnHandel(n,t,1)}},u.a.createElement("p",{className:f.a.green_point}),u.a.createElement("p",{className:f.a.context},t.currentTimeLineNode),30!==t.progressCode&&u.a.createElement("p",{className:f.a.arrow_icon})))}))),u.a.createElement(S.a,{isContactWayWrapperShow:i,imUrl:l,phoneNum:Number(d[0]),contactWayClose:this.contactWayClose.bind(this)}),u.a.createElement(N.a,{isConfirmShow:o.show,leftBtnText:o.leftBtnText,rightBtnText:o.rightBtnText,leftBtnAction:this.leftBtnAction.bind(this),rightBtnAction:this.rightBtnAction.bind(this),onConfirmClose:this.onConfirmClose.bind(this),confirmTitle:o.title,confirmContent:o.content}),u.a.createElement(b.a,{show:this.state.isLoadMoreShow,text:this.state.loderMoreText}),u.a.createElement(E.a,{goTop:a}),u.a.createElement(C.a,{show:p})):null}}]),t}(u.a.Component))||a)||a}}]);
//# sourceMappingURL=18.a947d14b.chunk.js.map